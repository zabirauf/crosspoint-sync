// Auto-generated by scripts/bundle-webview-extractor.js
// Do not edit manually â€” run `npm run build:webview-bundle` to regenerate.
//
// Contains Defuddle + DOMPurify bundled as a self-executing IIFE for
// injection into Android's hidden WebView. See extension-src/webview-content.js
// for the source.

/* eslint-disable */

export const DEFUDDLE_EXTRACTION_SCRIPT: string = "\"use strict\";var __cpWebViewExtract=(()=>{var Je=Object.create;var xe=Object.defineProperty;var Ke=Object.getOwnPropertyDescriptor;var Ze=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,tr=Object.prototype.hasOwnProperty;var er=($,k)=>()=>(k||$((k={exports:{}}).exports,k),k.exports);var rr=($,k,G,U)=>{if(k&&typeof k==\"object\"||typeof k==\"function\")for(let P of Ze(k))!tr.call($,P)&&P!==G&&xe($,P,{get:()=>k[P],enumerable:!(U=Ke(k,P))||U.enumerable});return $};var nr=($,k,G)=>(G=$!=null?Je(Qe($)):{},rr(k||!$||!$.__esModule?xe(G,\"default\",{value:$,enumerable:!0}):G,$));var _e=er((_t,Qt)=>{(function($,k){typeof _t==\"object\"&&typeof Qt==\"object\"?Qt.exports=k():typeof define==\"function\"&&define.amd?define([],k):typeof _t==\"object\"?_t.Defuddle=k():$.Defuddle=k()})(typeof self<\"u\"?self:_t,(()=>(()=>{\"use strict\";var $={0:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.mathRules=g.createCleanMathEl=void 0;let y=p(282);g.createCleanMathEl=(E,S,t,n)=>{let o=E.createElement(\"math\");if(o.setAttribute(\"xmlns\",\"http://www.w3.org/1998/Math/MathML\"),o.setAttribute(\"display\",n?\"block\":\"inline\"),o.setAttribute(\"data-latex\",t||\"\"),S==null?void 0:S.mathml){let e=E.createElement(\"div\");e.innerHTML=S.mathml;let r=e.querySelector(\"math\");r&&(o.innerHTML=r.innerHTML)}else t&&(o.textContent=t);return o},g.mathRules=[{selector:y.mathSelectors,element:\"math\",transform:(E,S)=>{if(!(function(r){return\"classList\"in r&&\"getAttribute\"in r&&\"querySelector\"in r})(E))return E;let t=(0,y.getMathMLFromElement)(E),n=(0,y.getBasicLatexFromElement)(E),o=(0,y.isBlockDisplay)(E),e=(0,g.createCleanMathEl)(S,t,n,o);return E.parentElement&&E.parentElement.querySelectorAll(`\n\t\t\t\t\t/* MathJax scripts and previews */\n\t\t\t\t\tscript[type^=\"math/\"],\n\t\t\t\t\t.MathJax_Preview,\n\n\t\t\t\t\t/* External math library scripts */\n\t\t\t\t\tscript[type=\"text/javascript\"][src*=\"mathjax\"],\n\t\t\t\t\tscript[type=\"text/javascript\"][src*=\"katex\"]\n\t\t\t\t`).forEach((r=>r.remove())),e}}]},20:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.GrokExtractor=void 0;let y=p(181);class E extends y.ConversationExtractor{constructor(t,n){super(t,n),this.messageContainerSelector=\".relative.group.flex.flex-col.justify-center.w-full\",this.messageBubbles=t.querySelectorAll(this.messageContainerSelector),this.footnotes=[],this.footnoteCounter=0}canExtract(){return!!this.messageBubbles&&this.messageBubbles.length>0}extractMessages(){let t=[];return this.footnotes=[],this.footnoteCounter=0,this.messageBubbles&&this.messageBubbles.length!==0&&this.messageBubbles.forEach((n=>{var o;let e=n.classList.contains(\"items-end\"),r=n.classList.contains(\"items-start\");if(!e&&!r)return;let i=n.querySelector(\".message-bubble\");if(!i)return;let a=\"\",l=\"\",m=\"\";if(e)a=i.textContent||\"\",l=\"user\",m=\"You\";else if(r){l=\"assistant\",m=\"Grok\";let d=i.cloneNode(!0);(o=d.querySelector(\".relative.border.border-border-l1.bg-surface-base\"))===null||o===void 0||o.remove(),a=d.innerHTML,a=this.processFootnotes(a)}a.trim()&&t.push({author:m,content:a.trim(),metadata:{role:l}})})),t}getFootnotes(){return this.footnotes}getMetadata(){var t;let n=this.getTitle(),o=((t=this.messageBubbles)===null||t===void 0?void 0:t.length)||0;return{title:n,site:\"Grok\",url:this.url,messageCount:o,description:`Grok conversation with ${o} messages`}}getTitle(){var t,n;let o=(t=this.document.title)===null||t===void 0?void 0:t.trim();if(o&&o!==\"Grok\"&&!o.startsWith(\"Grok by \"))return o.replace(/\\s-\\s*Grok$/,\"\").trim();let e=this.document.querySelector(`${this.messageContainerSelector}.items-end`);if(e){let r=e.querySelector(\".message-bubble\");if(r){let i=((n=r.textContent)===null||n===void 0?void 0:n.trim())||\"\";return i.length>50?i.slice(0,50)+\"...\":i}}return\"Grok Conversation\"}processFootnotes(t){return t.replace(/<a\\s+(?:[^>]*?\\s+)?href=\"([^\"]*)\"[^>]*>(.*?)<\\/a>/gi,((n,o,e)=>{if(!o||o.startsWith(\"#\")||!o.match(/^https?:\\/\\//i))return n;let r;if(this.footnotes.find((i=>i.url===o)))r=this.footnotes.findIndex((i=>i.url===o))+1;else{this.footnoteCounter++,r=this.footnoteCounter;let i=o;try{let a=new URL(o).hostname.replace(/^www\\./,\"\");i=`<a href=\"${o}\" target=\"_blank\" rel=\"noopener noreferrer\">${a}</a>`}catch{i=`<a href=\"${o}\" target=\"_blank\" rel=\"noopener noreferrer\">${o}</a>`,console.warn(`GrokExtractor: Could not parse URL for footnote: ${o}`)}this.footnotes.push({url:o,text:i})}return`${e}<sup id=\"fnref:${r}\" class=\"footnote-ref\"><a href=\"#fn:${r}\" class=\"footnote-link\">${r}</a></sup>`}))}}g.GrokExtractor=E},64:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.XArticleExtractor=void 0;let y=p(279),E='[data-testid=\"twitterArticleRichTextView\"]',S='[data-testid=\"twitter-article-title\"]',t='[itemprop=\"author\"]',n='meta[itemprop=\"name\"]',o='meta[itemprop=\"additionalName\"]',e='[data-testid=\"tweetPhoto\"] img',r=\".longform-unstyled, .public-DraftStyleDefault-block\",i='span[style*=\"font-weight: bold\"]',a=\"[data-offset-key]\",l='[data-testid=\"simpleTweet\"]',m='[data-testid=\"tweetText\"]',d='[data-testid=\"User-Name\"]',b='[data-testid=\"markdown-code-block\"]';class h extends y.BaseExtractor{constructor(u,v,f){super(u,v,f),this.articleContainer=u.querySelector(E)}canExtract(){return!!this.articleContainer}extract(){let u=this.extractTitle(),v=this.extractAuthor(),f=this.extractContent(),C=this.createDescription();return{content:f,contentHtml:f,extractedContent:{articleId:this.getArticleId()},variables:{title:u,author:v,site:\"X (Twitter)\",description:C}}}extractTitle(){var u;let v=this.document.querySelector(S);return((u=v==null?void 0:v.textContent)===null||u===void 0?void 0:u.trim())||\"Untitled X Article\"}extractAuthor(){var u,v;let f=this.document.querySelector(t);if(!f)return this.getAuthorFromUrl();let C=(u=f.querySelector(n))===null||u===void 0?void 0:u.getAttribute(\"content\"),_=(v=f.querySelector(o))===null||v===void 0?void 0:v.getAttribute(\"content\");return C&&_?`${C} (@${_})`:C||_||this.getAuthorFromUrl()}getAuthorFromUrl(){let u=this.url.match(/\\/([a-zA-Z][a-zA-Z0-9_]{0,14})\\/article\\/\\d+/);return u?`@${u[1]}`:\"Unknown\"}getArticleId(){let u=this.url.match(/article\\/(\\d+)/);return u?u[1]:\"\"}extractContent(){if(!this.articleContainer)return\"\";let u=this.articleContainer.cloneNode(!0);return this.cleanContent(u),`<article class=\"x-article\">${u.innerHTML}</article>`}cleanContent(u){let v=u.ownerDocument||this.document;this.convertEmbeddedTweets(u,v),this.convertCodeBlocks(u,v),this.convertHeaders(u,v),this.unwrapLinkedImages(u,v),this.upgradeImageQuality(u),this.convertBoldSpans(u,v),this.convertDraftParagraphs(u,v),this.removeDraftAttributes(u)}convertEmbeddedTweets(u,v){u.querySelectorAll(l).forEach((f=>{var C,_,x,q,R;let B=v.createElement(\"blockquote\");B.className=\"embedded-tweet\";let s=f.querySelector(d),w=s==null?void 0:s.querySelectorAll(\"a\"),A=((_=(C=w==null?void 0:w[0])===null||C===void 0?void 0:C.textContent)===null||_===void 0?void 0:_.trim())||\"\",N=((q=(x=w==null?void 0:w[1])===null||x===void 0?void 0:x.textContent)===null||q===void 0?void 0:q.trim())||\"\",I=f.querySelector(m),M=((R=I==null?void 0:I.textContent)===null||R===void 0?void 0:R.trim())||\"\";if(A||N){let O=v.createElement(\"cite\");O.textContent=N?`${A} ${N}`:A,B.appendChild(O)}if(M){let O=v.createElement(\"p\");O.textContent=M,B.appendChild(O)}f.replaceWith(B)}))}convertCodeBlocks(u,v){u.querySelectorAll(b).forEach((f=>{var C;let _=f.querySelector(\"pre\"),x=f.querySelector(\"code\");if(!_||!x)return;let q=\"\",R=x.className.match(/language-(\\w+)/);if(R)q=R[1];else{let w=f.querySelector(\"span\");q=((C=w==null?void 0:w.textContent)===null||C===void 0?void 0:C.trim())||\"\"}let B=v.createElement(\"pre\"),s=v.createElement(\"code\");q&&(s.setAttribute(\"data-lang\",q),s.className=`language-${q}`),s.textContent=x.textContent||\"\",B.appendChild(s),f.replaceWith(B)}))}convertHeaders(u,v){u.querySelectorAll(\"h1, h2, h3, h4, h5, h6\").forEach((f=>{var C;let _=f.tagName.toLowerCase(),x=((C=f.textContent)===null||C===void 0?void 0:C.trim())||\"\";if(!x)return;let q=v.createElement(_);q.textContent=x,f.replaceWith(q)}))}unwrapLinkedImages(u,v){u.querySelectorAll(e).forEach((f=>{var C;let _=f.closest(\"a\");if(!_||!u.contains(_))return;let x=f.getAttribute(\"src\")||\"\",q=((C=f.getAttribute(\"alt\"))===null||C===void 0?void 0:C.replace(/\\s+/g,\" \").trim())||\"Image\";x=x.includes(\"&name=\")?x.replace(/&name=\\w+/,\"&name=large\"):x.includes(\"?\")?`${x}&name=large`:`${x}?name=large`;let R=v.createElement(\"img\");R.setAttribute(\"src\",x),R.setAttribute(\"alt\",q),_.replaceWith(R)}))}upgradeImageQuality(u){u.querySelectorAll(e).forEach((v=>{let f=v.getAttribute(\"src\");f&&(f.includes(\"&name=\")?v.setAttribute(\"src\",f.replace(/&name=\\w+/,\"&name=large\")):f.includes(\"?\")?v.setAttribute(\"src\",`${f}&name=large`):v.setAttribute(\"src\",`${f}?name=large`))}))}convertDraftParagraphs(u,v){u.querySelectorAll(r).forEach((f=>{let C=v.createElement(\"p\"),_=x=>{if(x.nodeType===3)C.appendChild(v.createTextNode(x.textContent||\"\"));else if(x.nodeType===1){let q=x,R=q.tagName.toLowerCase();if(R===\"strong\"){let B=v.createElement(\"strong\");B.textContent=q.textContent||\"\",C.appendChild(B)}else if(R===\"a\"){let B=v.createElement(\"a\");B.setAttribute(\"href\",q.getAttribute(\"href\")||\"\"),B.textContent=q.textContent||\"\",C.appendChild(B)}else if(R===\"code\"){let B=v.createElement(\"code\");B.textContent=q.textContent||\"\",C.appendChild(B)}else q.childNodes.forEach((B=>_(B)))}};f.childNodes.forEach((x=>_(x))),f.replaceWith(C)}))}convertBoldSpans(u,v){u.querySelectorAll(i).forEach((f=>{let C=v.createElement(\"strong\");C.textContent=f.textContent||\"\",f.replaceWith(C)}))}removeDraftAttributes(u){u.querySelectorAll(a).forEach((v=>{v.removeAttribute(\"data-offset-key\")}))}createDescription(){var u,v;let f=((v=(u=this.articleContainer)===null||u===void 0?void 0:u.textContent)===null||v===void 0?void 0:v.trim())||\"\";return f.slice(0,140)+(f.length>140?\"...\":\"\")}}g.XArticleExtractor=h},181:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ConversationExtractor=void 0;let y=p(279),E=p(628);class S extends y.BaseExtractor{getFootnotes(){return[]}extract(){var n;let o=this.extractMessages(),e=this.getMetadata(),r=this.getFootnotes(),i=this.createContentHtml(o,r),a=this.document.implementation.createHTMLDocument(),l=a.createElement(\"article\");l.innerHTML=i,a.body.appendChild(l);let m=new E.Defuddle(a).parse(),d=m.content;return{content:d,contentHtml:d,extractedContent:{messageCount:o.length.toString()},variables:{title:e.title||\"Conversation\",site:e.site,description:e.description||`${e.site} conversation with ${o.length} messages`,wordCount:((n=m.wordCount)===null||n===void 0?void 0:n.toString())||\"\"}}}createContentHtml(n,o){return`${n.map(((e,r)=>{let i=e.timestamp?`<div class=\"message-timestamp\">${e.timestamp}</div>`:\"\",a=/<p[^>]*>[\\s\\S]*?<\\/p>/i.test(e.content)?e.content:`<p>${e.content}</p>`,l=e.metadata?Object.entries(e.metadata).map((([m,d])=>`data-${m}=\"${d}\"`)).join(\" \"):\"\";return`\n\t\t\t<div class=\"message message-${e.author.toLowerCase()}\" ${l}>\n\t\t\t\t<div class=\"message-header\">\n\t\t\t\t\t<p class=\"message-author\"><strong>${e.author}</strong></p>\n\t\t\t\t\t${i}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message-content\">\n\t\t\t\t\t${a}\n\t\t\t\t</div>\n\t\t\t</div>${r<n.length-1?`\n<hr>`:\"\"}`})).join(`\n`).trim()}\n${o.length>0?`\n\t\t\t<div id=\"footnotes\">\n\t\t\t\t<ol>\n\t\t\t\t\t${o.map(((e,r)=>`\n\t\t\t\t\t\t<li class=\"footnote\" id=\"fn:${r+1}\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<a href=\"${e.url}\" target=\"_blank\">${e.text}</a>&nbsp;<a href=\"#fnref:${r+1}\" class=\"footnote-backref\">\\u21A9</a>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t`)).join(\"\")}\n\t\t\t\t</ol>\n\t\t\t</div>`:\"\"}`.trim()}}g.ConversationExtractor=S},248:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.TwitterExtractor=void 0;let y=p(279);class E extends y.BaseExtractor{constructor(t,n){var o;super(t,n),this.mainTweet=null,this.threadTweets=[];let e=t.querySelector('[aria-label=\"Timeline: Conversation\"]');if(!e){let a=t.querySelector('article[data-testid=\"tweet\"]');return void(a&&(this.mainTweet=a))}let r=Array.from(e.querySelectorAll('article[data-testid=\"tweet\"]')),i=(o=e.querySelector(\"section, h2\"))===null||o===void 0?void 0:o.parentElement;i&&r.forEach(((a,l)=>{if(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING)return r.splice(l),!1})),this.mainTweet=r[0]||null,this.threadTweets=r.slice(1)}canExtract(){return!!this.mainTweet}extract(){let t=this.extractTweet(this.mainTweet),n=this.threadTweets.map((i=>this.extractTweet(i))).join(`\n<hr>\n`),o=`\n\t\t\t<div class=\"tweet-thread\">\n\t\t\t\t<div class=\"main-tweet\">\n\t\t\t\t\t${t}\n\t\t\t\t</div>\n\t\t\t\t${n?`\n\t\t\t\t\t<hr>\n\t\t\t\t\t<div class=\"thread-tweets\">\n\t\t\t\t\t\t${n}\n\t\t\t\t\t</div>\n\t\t\t\t`:\"\"}\n\t\t\t</div>\n\t\t`.trim(),e=this.getTweetId(),r=this.getTweetAuthor();return{content:o,contentHtml:o,extractedContent:{tweetId:e,tweetAuthor:r},variables:{title:`Thread by ${r}`,author:r,site:\"X (Twitter)\",description:this.createDescription(this.mainTweet)}}}formatTweetText(t){if(!t)return\"\";let n=this.document.createElement(\"div\");return n.innerHTML=t,n.querySelectorAll(\"a\").forEach((o=>{var e;let r=((e=o.textContent)===null||e===void 0?void 0:e.trim())||\"\";o.replaceWith(r)})),n.querySelectorAll(\"span, div\").forEach((o=>{o.replaceWith(...Array.from(o.childNodes))})),n.innerHTML.split(`\n`).map((o=>o.trim())).filter((o=>o)).map((o=>`<p>${o}</p>`)).join(`\n`)}extractTweet(t){var n,o,e;if(!t)return\"\";let r=t.cloneNode(!0);r.querySelectorAll('img[src*=\"/emoji/\"]').forEach((h=>{if(h.tagName.toLowerCase()===\"img\"&&h.getAttribute(\"alt\")){let T=h.getAttribute(\"alt\");T&&h.replaceWith(T)}}));let i=((n=r.querySelector('[data-testid=\"tweetText\"]'))===null||n===void 0?void 0:n.innerHTML)||\"\",a=this.formatTweetText(i),l=this.extractImages(t),m=this.extractUserInfo(t),d=(e=(o=t.querySelector('[aria-labelledby*=\"id__\"]'))===null||o===void 0?void 0:o.querySelector('[data-testid=\"User-Name\"]'))===null||e===void 0?void 0:e.closest('[aria-labelledby*=\"id__\"]'),b=d?this.extractTweet(d):\"\";return`\n\t\t\t<div class=\"tweet\">\n\t\t\t\t<div class=\"tweet-header\">\n\t\t\t\t\t<span class=\"tweet-author\"><strong>${m.fullName}</strong> <span class=\"tweet-handle\">${m.handle}</span></span>\n\t\t\t\t\t${m.date?`<a href=\"${m.permalink}\" class=\"tweet-date\">${m.date}</a>`:\"\"}\n\t\t\t\t</div>\n\t\t\t\t${a?`<div class=\"tweet-text\">${a}</div>`:\"\"}\n\t\t\t\t${l.length?`\n\t\t\t\t\t<div class=\"tweet-media\">\n\t\t\t\t\t\t${l.join(`\n`)}\n\t\t\t\t\t</div>\n\t\t\t\t`:\"\"}\n\t\t\t\t${b?`\n\t\t\t\t\t<blockquote class=\"quoted-tweet\">\n\t\t\t\t\t\t${b}\n\t\t\t\t\t</blockquote>\n\t\t\t\t`:\"\"}\n\t\t\t</div>\n\t\t`.trim()}extractUserInfo(t){var n,o,e,r,i,a,l,m,d;let b=t.querySelector('[data-testid=\"User-Name\"]');if(!b)return{fullName:\"\",handle:\"\",date:\"\",permalink:\"\"};let h=b.querySelectorAll(\"a\"),T=((o=(n=h==null?void 0:h[0])===null||n===void 0?void 0:n.textContent)===null||o===void 0?void 0:o.trim())||\"\",u=((r=(e=h==null?void 0:h[1])===null||e===void 0?void 0:e.textContent)===null||r===void 0?void 0:r.trim())||\"\";T&&u||(T=((a=(i=b.querySelector('span[style*=\"color: rgb(15, 20, 25)\"] span'))===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.trim())||\"\",u=((m=(l=b.querySelector('span[style*=\"color: rgb(83, 100, 113)\"]'))===null||l===void 0?void 0:l.textContent)===null||m===void 0?void 0:m.trim())||\"\");let v=t.querySelector(\"time\"),f=(v==null?void 0:v.getAttribute(\"datetime\"))||\"\";return{fullName:T,handle:u,date:f?new Date(f).toISOString().split(\"T\")[0]:\"\",permalink:((d=v==null?void 0:v.closest(\"a\"))===null||d===void 0?void 0:d.href)||\"\"}}extractImages(t){var n,o;let e=['[data-testid=\"tweetPhoto\"]','[data-testid=\"tweet-image\"]','img[src*=\"media\"]'],r=[],i=(o=(n=t.querySelector('[aria-labelledby*=\"id__\"]'))===null||n===void 0?void 0:n.querySelector('[data-testid=\"User-Name\"]'))===null||o===void 0?void 0:o.closest('[aria-labelledby*=\"id__\"]');for(let a of e)t.querySelectorAll(a).forEach((l=>{var m,d;if(!(i!=null&&i.contains(l))&&l.tagName.toLowerCase()===\"img\"&&l.getAttribute(\"alt\")){let b=((m=l.getAttribute(\"src\"))===null||m===void 0?void 0:m.replace(/&name=\\w+$/,\"&name=large\"))||\"\",h=((d=l.getAttribute(\"alt\"))===null||d===void 0?void 0:d.replace(/\\s+/g,\" \").trim())||\"\";r.push(`<img src=\"${b}\" alt=\"${h}\" />`)}}));return r}getTweetId(){let t=this.url.match(/status\\/(\\d+)/);return(t==null?void 0:t[1])||\"\"}getTweetAuthor(){var t,n,o;let e=(t=this.mainTweet)===null||t===void 0?void 0:t.querySelector('[data-testid=\"User-Name\"]'),r=e==null?void 0:e.querySelectorAll(\"a\"),i=((o=(n=r==null?void 0:r[1])===null||n===void 0?void 0:n.textContent)===null||o===void 0?void 0:o.trim())||\"\";return i.startsWith(\"@\")?i:`@${i}`}createDescription(t){var n;return t?(((n=t.querySelector('[data-testid=\"tweetText\"]'))===null||n===void 0?void 0:n.textContent)||\"\").trim().slice(0,140).replace(/\\s+/g,\" \"):\"\"}}g.TwitterExtractor=E},258:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.YoutubeExtractor=void 0;let y=p(279);class E extends y.BaseExtractor{constructor(t,n,o){super(t,n,o),this.videoElement=t.querySelector(\"video\"),this.schemaOrgData=o}canExtract(){return!0}extract(){let t=this.getVideoData(),n=this.getChannelName(t),o=t.description||\"\",e=this.formatDescription(o),r=`<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/${this.getVideoId()}\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe><br>${e}`;return{content:r,contentHtml:r,extractedContent:{videoId:this.getVideoId(),author:n},variables:{title:t.name||\"\",author:n,site:\"YouTube\",image:Array.isArray(t.thumbnailUrl)&&t.thumbnailUrl[0]||\"\",published:t.uploadDate,description:o.slice(0,200).trim()}}}formatDescription(t){return`<p>${t.replace(/\\n/g,\"<br>\")}</p>`}getVideoData(){return this.schemaOrgData?(Array.isArray(this.schemaOrgData)?this.schemaOrgData.find((t=>t[\"@type\"]===\"VideoObject\")):this.schemaOrgData[\"@type\"]===\"VideoObject\"?this.schemaOrgData:null)||{}:{}}getChannelName(t){let n=this.getChannelNameFromDom();return n||this.getChannelNameFromPlayerResponse()||(t==null?void 0:t.author)||\"\"}getChannelNameFromDom(){var t;let n=['ytd-video-owner-renderer #channel-name a[href^=\"/@\"]','#owner-name a[href^=\"/@\"]'];for(let o of n){let e=this.document.querySelector(o),r=(t=e==null?void 0:e.textContent)===null||t===void 0?void 0:t.trim();if(r)return r}return this.getChannelNameFromMicrodata()}getChannelNameFromMicrodata(){var t;let n=this.document.querySelector('[itemprop=\"author\"]');if(!n)return\"\";let o=n.querySelector('meta[itemprop=\"name\"]');if(o!=null&&o.getAttribute(\"content\"))return o.getAttribute(\"content\").trim();let e=n.querySelector('link[itemprop=\"name\"]');if(e!=null&&e.getAttribute(\"content\"))return e.getAttribute(\"content\").trim();let r=n.querySelector('[itemprop=\"name\"], a, span');return((t=r==null?void 0:r.textContent)===null||t===void 0?void 0:t.trim())||\"\"}getChannelNameFromPlayerResponse(){var t,n,o,e;let r=this.parseInlineJson(\"ytInitialPlayerResponse\");if(!r)return\"\";let i=((t=r==null?void 0:r.videoDetails)===null||t===void 0?void 0:t.author)||((n=r==null?void 0:r.videoDetails)===null||n===void 0?void 0:n.ownerChannelName);return i||((e=(o=r==null?void 0:r.microformat)===null||o===void 0?void 0:o.playerMicroformatRenderer)===null||e===void 0?void 0:e.ownerChannelName)||\"\"}parseInlineJson(t){let n=Array.from(this.document.querySelectorAll(\"script\"));for(let o of n){let e=o.textContent||\"\";if(!e.includes(t))continue;let r=e.indexOf(\"{\",e.indexOf(t));if(r===-1)continue;let i=0;for(let a=r;a<e.length;a++){let l=e[a];if(l===\"{\")i+=1;else if(l===\"}\"&&(i-=1,i===0)){let m=e.slice(r,a+1);try{return JSON.parse(m)}catch(d){console.error(\"YoutubeExtractor: failed to parse inline JSON\",d);break}}}}return null}getVideoId(){let t=new URL(this.url);return t.hostname===\"youtu.be\"?t.pathname.slice(1):new URLSearchParams(t.search).get(\"v\")||\"\"}}g.YoutubeExtractor=E},279:(P,g)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.BaseExtractor=void 0,g.BaseExtractor=class{constructor(p,y,E){this.document=p,this.url=y,this.schemaOrgData=E}}},282:(P,g)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.mathSelectors=g.isBlockDisplay=g.getBasicLatexFromElement=g.getMathMLFromElement=void 0,g.getMathMLFromElement=p=>{if(p.tagName.toLowerCase()===\"math\"){let t=p.getAttribute(\"display\")===\"block\";return{mathml:p.outerHTML,latex:p.getAttribute(\"alttext\")||null,isBlock:t}}let y=p.getAttribute(\"data-mathml\");if(y){let t=document.createElement(\"div\");t.innerHTML=y;let n=t.querySelector(\"math\");if(n){let o=n.getAttribute(\"display\")===\"block\";return{mathml:n.outerHTML,latex:n.getAttribute(\"alttext\")||null,isBlock:o}}}let E=p.querySelector(\".MJX_Assistive_MathML, mjx-assistive-mml\");if(E){let t=E.querySelector(\"math\");if(t){let n=t.getAttribute(\"display\"),o=E.getAttribute(\"display\"),e=n===\"block\"||o===\"block\";return{mathml:t.outerHTML,latex:t.getAttribute(\"alttext\")||null,isBlock:e}}}let S=p.querySelector(\".katex-mathml math\");return S?{mathml:S.outerHTML,latex:null,isBlock:!1}:null},g.getBasicLatexFromElement=p=>{var y,E,S;let t=p.getAttribute(\"data-latex\");if(t)return t;if(p.tagName.toLowerCase()===\"img\"&&p.classList.contains(\"latex\")){let o=p.getAttribute(\"alt\");if(o)return o;let e=p.getAttribute(\"src\");if(e){let r=e.match(/latex\\.php\\?latex=([^&]+)/);if(r)return decodeURIComponent(r[1]).replace(/\\+/g,\" \").replace(/%5C/g,\"\\\\\")}}let n=p.querySelector('annotation[encoding=\"application/x-tex\"]');if(n!=null&&n.textContent)return n.textContent.trim();if(p.matches(\".katex\")){let o=p.querySelector('.katex-mathml annotation[encoding=\"application/x-tex\"]');if(o!=null&&o.textContent)return o.textContent.trim()}if(p.matches('script[type=\"math/tex\"]')||p.matches('script[type=\"math/tex; mode=display\"]'))return((y=p.textContent)===null||y===void 0?void 0:y.trim())||null;if(p.parentElement){let o=p.parentElement.querySelector('script[type=\"math/tex\"], script[type=\"math/tex; mode=display\"]');if(o)return((E=o.textContent)===null||E===void 0?void 0:E.trim())||null}return p.getAttribute(\"alt\")||((S=p.textContent)===null||S===void 0?void 0:S.trim())||null},g.isBlockDisplay=p=>{if(p.getAttribute(\"display\")===\"block\")return!0;let y=p.className.toLowerCase();if(y.includes(\"display\")||y.includes(\"block\")||p.closest('.katex-display, .MathJax_Display, [data-display=\"block\"]'))return!0;let E=p.previousElementSibling;if((E==null?void 0:E.tagName.toLowerCase())===\"p\"||p.matches(\".mwe-math-fallback-image-display\"))return!0;if(p.matches(\".katex\"))return p.closest(\".katex-display\")!==null;if(p.hasAttribute(\"display\"))return p.getAttribute(\"display\")===\"true\";if(p.matches('script[type=\"math/tex; mode=display\"]'))return!0;if(p.hasAttribute(\"display\"))return p.getAttribute(\"display\")===\"true\";let S=p.closest(\"[display]\");return!!S&&S.getAttribute(\"display\")===\"true\"},g.mathSelectors=['img.latex[src*=\"latex.php\"]',\"span.MathJax\",\"mjx-container\",'script[type=\"math/tex\"]','script[type=\"math/tex; mode=display\"]','.MathJax_Preview + script[type=\"math/tex\"]',\".MathJax_Display\",\".MathJax_SVG\",\".MathJax_MathML\",\".mwe-math-element\",\".mwe-math-fallback-image-inline\",\".mwe-math-fallback-image-display\",\".mwe-math-mathml-inline\",\".mwe-math-mathml-display\",\".katex\",\".katex-display\",\".katex-mathml\",\".katex-html\",\"[data-katex]\",'script[type=\"math/katex\"]',\"math\",\"[data-math]\",\"[data-latex]\",\"[data-tex]\",'script[type^=\"math/\"]','annotation[encoding=\"application/x-tex\"]'].join(\",\")},397:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ClaudeExtractor=void 0;let y=p(181);class E extends y.ConversationExtractor{constructor(t,n){super(t,n),this.articles=t.querySelectorAll('div[data-testid=\"user-message\"], div[data-testid=\"assistant-message\"], div.font-claude-response')}canExtract(){return!!this.articles&&this.articles.length>0}extractMessages(){let t=[];return this.articles&&this.articles.forEach((n=>{let o,e;if(n.hasAttribute(\"data-testid\")){if(n.getAttribute(\"data-testid\")!==\"user-message\")return;o=\"you\",e=n.innerHTML}else{if(!n.classList.contains(\"font-claude-response\"))return;o=\"assistant\",e=(n.querySelector(\".standard-markdown\")||n).innerHTML}e&&(e=e.replace(/\\u200B/g,\"\").replace(/<p[^>]*>\\s*<\\/p>/g,\"\"),t.push({author:o===\"you\"?\"You\":\"Claude\",content:e.trim(),metadata:{role:o}}))})),t}getMetadata(){let t=this.getTitle(),n=this.extractMessages();return{title:t,site:\"Claude\",url:this.url,messageCount:n.length,description:`Claude conversation with ${n.length} messages`}}getTitle(){var t,n,o,e,r;let i=(t=this.document.title)===null||t===void 0?void 0:t.trim();if(i&&i!==\"Claude\")return i.replace(/ - Claude$/,\"\");let a=(o=(n=this.document.querySelector(\"header .font-tiempos\"))===null||n===void 0?void 0:n.textContent)===null||o===void 0?void 0:o.trim();if(a)return a;let l=(r=(e=this.articles)===null||e===void 0?void 0:e.item(0))===null||r===void 0?void 0:r.querySelector('[data-testid=\"user-message\"]');if(l){let m=l.textContent||\"\";return m.length>50?m.slice(0,50)+\"...\":m}return\"Claude Conversation\"}}g.ClaudeExtractor=E},458:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.HackerNewsExtractor=void 0;let y=p(279);class E extends y.BaseExtractor{constructor(t,n){super(t,n),this.mainPost=t.querySelector(\".fatitem\"),this.isCommentPage=this.detectCommentPage(),this.mainComment=this.isCommentPage?this.findMainComment():null}detectCommentPage(){var t;return!!(!((t=this.mainPost)===null||t===void 0)&&t.querySelector('.navs a[href*=\"parent\"]'))}findMainComment(){var t;return((t=this.mainPost)===null||t===void 0?void 0:t.querySelector(\".comment\"))||null}canExtract(){return!!this.mainPost}extract(){let t=this.getPostContent(),n=this.extractComments(),o=this.createContentHtml(t,n),e=this.getPostTitle(),r=this.getPostAuthor(),i=this.createDescription(),a=this.getPostDate();return{content:o,contentHtml:o,extractedContent:{postId:this.getPostId(),postAuthor:r},variables:{title:e,author:r,site:\"Hacker News\",description:i,published:a}}}createContentHtml(t,n){return`\n\t\t\t<div class=\"hackernews-post\">\n\t\t\t\t<div class=\"post-content\">\n\t\t\t\t\t${t}\n\t\t\t\t</div>\n\t\t\t\t${n?`\n\t\t\t\t\t<hr>\n\t\t\t\t\t<h2>Comments</h2>\n\t\t\t\t\t<div class=\"hackernews-comments\">\n\t\t\t\t\t\t${n}\n\t\t\t\t\t</div>\n\t\t\t\t`:\"\"}\n\t\t\t</div>\n\t\t`.trim()}getPostContent(){var t,n,o,e,r,i;if(!this.mainPost)return\"\";if(this.isCommentPage&&this.mainComment){let b=((t=this.mainComment.querySelector(\".hnuser\"))===null||t===void 0?void 0:t.textContent)||\"[deleted]\",h=((n=this.mainComment.querySelector(\".commtext\"))===null||n===void 0?void 0:n.innerHTML)||\"\",T=this.mainComment.querySelector(\".age\"),u=((T==null?void 0:T.getAttribute(\"title\"))||\"\").split(\"T\")[0]||\"\",v=((e=(o=this.mainComment.querySelector(\".score\"))===null||o===void 0?void 0:o.textContent)===null||e===void 0?void 0:e.trim())||\"\",f=((r=this.mainPost.querySelector('.navs a[href*=\"parent\"]'))===null||r===void 0?void 0:r.getAttribute(\"href\"))||\"\";return`\n\t\t\t\t<div class=\"comment main-comment\">\n\t\t\t\t\t<div class=\"comment-metadata\">\n\t\t\t\t\t\t<span class=\"comment-author\"><strong>${b}</strong></span> \\u2022\n\t\t\t\t\t\t<span class=\"comment-date\">${u}</span>\n\t\t\t\t\t\t${v?` \\u2022 <span class=\"comment-points\">${v}</span>`:\"\"}\n\t\t\t\t\t\t${f?` \\u2022 <a href=\"https://news.ycombinator.com/${f}\" class=\"parent-link\">parent</a>`:\"\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"comment-content\">${h}</div>\n\t\t\t\t</div>\n\t\t\t`.trim()}let a=this.mainPost.querySelector(\"tr.athing\"),l=(a==null||a.nextElementSibling,((i=a==null?void 0:a.querySelector(\".titleline a\"))===null||i===void 0?void 0:i.getAttribute(\"href\"))||\"\"),m=\"\";l&&(m+=`<p><a href=\"${l}\" target=\"_blank\">${l}</a></p>`);let d=this.mainPost.querySelector(\".toptext\");return d&&(m+=`<div class=\"post-text\">${d.innerHTML}</div>`),m}extractComments(){let t=Array.from(this.document.querySelectorAll(\"tr.comtr\"));return this.processComments(t)}processComments(t){var n,o,e,r;let i=\"\",a=new Set,l=-1,m=[];for(let d of t){let b=d.getAttribute(\"id\");if(!b||a.has(b))continue;a.add(b);let h=((n=d.querySelector(\".ind img\"))===null||n===void 0?void 0:n.getAttribute(\"width\"))||\"0\",T=parseInt(h)/40,u=d.querySelector(\".commtext\"),v=((o=d.querySelector(\".hnuser\"))===null||o===void 0?void 0:o.textContent)||\"[deleted]\",f=d.querySelector(\".age\"),C=((r=(e=d.querySelector(\".score\"))===null||e===void 0?void 0:e.textContent)===null||r===void 0?void 0:r.trim())||\"\";if(!u)continue;let _=`https://news.ycombinator.com/item?id=${b}`,x=((f==null?void 0:f.getAttribute(\"title\"))||\"\").split(\"T\")[0]||\"\";if(T===0){for(;m.length>0;)i+=\"</blockquote>\",m.pop();i+=\"<blockquote>\",m=[0],l=0}else if(T<l)for(;m.length>0&&m[m.length-1]>=T;)i+=\"</blockquote>\",m.pop();else T>l&&(i+=\"<blockquote>\",m.push(T));i+=`<div class=\"comment\">\n\t<div class=\"comment-metadata\">\n\t\t<span class=\"comment-author\"><strong>${v}</strong></span> \\u2022\n\t\t<a href=\"${_}\" class=\"comment-link\">${x}</a>\n\t\t${C?` \\u2022 <span class=\"comment-points\">${C}</span>`:\"\"}\n\t</div>\n\t<div class=\"comment-content\">${u.innerHTML}</div>\n</div>`,l=T}for(;m.length>0;)i+=\"</blockquote>\",m.pop();return i}getPostId(){let t=this.url.match(/id=(\\d+)/);return(t==null?void 0:t[1])||\"\"}getPostTitle(){var t,n,o,e,r;if(this.isCommentPage&&this.mainComment){let i=((t=this.mainComment.querySelector(\".hnuser\"))===null||t===void 0?void 0:t.textContent)||\"[deleted]\",a=((n=this.mainComment.querySelector(\".commtext\"))===null||n===void 0?void 0:n.textContent)||\"\";return`Comment by ${i}: ${a.trim().slice(0,50)+(a.length>50?\"...\":\"\")}`}return((r=(e=(o=this.mainPost)===null||o===void 0?void 0:o.querySelector(\".titleline\"))===null||e===void 0?void 0:e.textContent)===null||r===void 0?void 0:r.trim())||\"\"}getPostAuthor(){var t,n,o;return((o=(n=(t=this.mainPost)===null||t===void 0?void 0:t.querySelector(\".hnuser\"))===null||n===void 0?void 0:n.textContent)===null||o===void 0?void 0:o.trim())||\"\"}createDescription(){let t=this.getPostTitle(),n=this.getPostAuthor();return this.isCommentPage?`Comment by ${n} on Hacker News`:`${t} - by ${n} on Hacker News`}getPostDate(){if(!this.mainPost)return\"\";let t=this.mainPost.querySelector(\".age\");return((t==null?void 0:t.getAttribute(\"title\"))||\"\").split(\"T\")[0]||\"\"}}g.HackerNewsExtractor=E},552:(P,g)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.isElement=function(E){return E.nodeType===p.ELEMENT_NODE},g.isTextNode=function(E){return E.nodeType===p.TEXT_NODE},g.isCommentNode=function(E){return E.nodeType===p.COMMENT_NODE},g.getComputedStyle=function(E){let S=y(E.ownerDocument);return S?S.getComputedStyle(E):null},g.getWindow=y,g.logDebug=function(E,...S){typeof window<\"u\"&&window.defuddleDebug&&console.log(\"Defuddle:\",E,...S)};let p={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};function y(E){return E.defaultView?E.defaultView:E.ownerWindow?E.ownerWindow:E.window?E.window:null}},588:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.GitHubExtractor=void 0;let y=p(279);class E extends y.BaseExtractor{canExtract(){return['meta[name=\"expected-hostname\"][content=\"github.com\"]','meta[name=\"octolytics-url\"]','meta[name=\"github-keyboard-shortcuts\"]',\".js-header-wrapper\",\"#js-repo-pjax-container\"].some((t=>this.document.querySelector(t)!==null))&&Object.values({issue:['[data-testid=\"issue-metadata-sticky\"]','[data-testid=\"issue-title\"]']}).some((t=>t.some((n=>this.document.querySelector(n)!==null))))}extract(){return this.extractIssue()}extractIssue(){let t=this.extractRepoInfo(),n=this.extractIssueNumber(),o=\"\",e=this.document.querySelector('[data-testid=\"issue-viewer-issue-container\"]');if(e){let a=this.extractAuthor(e,['a[data-testid=\"issue-body-header-author\"]',\".IssueBodyHeaderAuthor-module__authorLoginLink--_S7aT\",\".ActivityHeader-module__AuthorLink--iofTU\",'a[href*=\"/users/\"][data-hovercard-url*=\"/users/\"]','a[aria-label*=\"profile\"]']),l=e.querySelector(\"relative-time\"),m=(l==null?void 0:l.getAttribute(\"datetime\"))||\"\",d=e.querySelector('[data-testid=\"issue-body-viewer\"] .markdown-body');if(d){let b=this.cleanBodyContent(d);if(o+=`<div class=\"issue-author\"><strong>${a}</strong>`,m){let h=new Date(m);o+=` opened this issue on ${h.toLocaleDateString()}`}o+=`</div>\n\n`,o+=`<div class=\"issue-body\">${b}</div>\n\n`}}let r=Array.from(this.document.querySelectorAll(\"[data-wrapper-timeline-id]\")),i=new Set;return r.forEach((a=>{let l=a.querySelector(\".react-issue-comment\");if(!l)return;let m=a.getAttribute(\"data-wrapper-timeline-id\");if(!m||i.has(m))return;i.add(m);let d=this.extractAuthor(l,[\".ActivityHeader-module__AuthorLink--iofTU\",'a[data-testid=\"avatar-link\"]','a[href^=\"/\"][data-hovercard-url*=\"/users/\"]']),b=l.querySelector(\"relative-time\"),h=(b==null?void 0:b.getAttribute(\"datetime\"))||\"\",T=l.querySelector(\".markdown-body\");if(T){let u=this.cleanBodyContent(T);if(u){if(o+=`<div class=\"comment\">\n`,o+=`<div class=\"comment-header\"><strong>${d}</strong>`,h){let v=new Date(h);o+=` commented on ${v.toLocaleDateString()}`}o+=`</div>\n`,o+=`<div class=\"comment-body\">${u}</div>\n`,o+=`</div>\n\n`}}})),{content:o,contentHtml:o,extractedContent:{type:\"issue\",issueNumber:n,repository:t.repo,owner:t.owner},variables:{title:this.document.title,author:\"\",site:`GitHub - ${t.owner}/${t.repo}`,description:this.createDescription(o)}}}extractAuthor(t,n){for(let o of n){let e=t.querySelector(o);if(e){let r=e.getAttribute(\"href\");if(r){if(r.startsWith(\"/\"))return r.substring(1);if(r.includes(\"github.com/\")){let i=r.match(/github\\.com\\/([^\\/\\?#]+)/);if(i&&i[1])return i[1]}}}}return\"Unknown\"}cleanBodyContent(t){let n=t.cloneNode(!0);return n.querySelectorAll('button, [data-testid*=\"button\"], [data-testid*=\"menu\"]').forEach((o=>o.remove())),n.querySelectorAll(\".js-clipboard-copy, .zeroclipboard-container\").forEach((o=>o.remove())),n.innerHTML.trim()}extractIssueNumber(){var t;let n=this.url.match(/\\/(issues|pull)\\/(\\d+)/);if(n)return n[2];let o=this.document.querySelector(\"h1\"),e=(t=o==null?void 0:o.textContent)===null||t===void 0?void 0:t.match(/#(\\d+)/);return e?e[1]:\"\"}extractRepoInfo(){let t=this.url.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/);if(t)return{owner:t[1],repo:t[2]};let n=this.document.title.match(/([^\\/\\s]+)\\/([^\\/\\s]+)/);return n?{owner:n[1],repo:n[2]}:{owner:\"\",repo:\"\"}}createDescription(t){var n;if(!t)return\"\";let o=this.document.createElement(\"div\");return o.innerHTML=t,((n=o.textContent)===null||n===void 0?void 0:n.trim().slice(0,140).replace(/\\s+/g,\" \"))||\"\"}}g.GitHubExtractor=E},608:(P,g)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.MetadataExtractor=void 0,g.MetadataExtractor=class{static extract(p,y,E){var S,t;let n=\"\",o=\"\";try{if(o=((S=p.location)===null||S===void 0?void 0:S.href)||\"\",o||(o=this.getMetaContent(E,\"property\",\"og:url\")||this.getMetaContent(E,\"property\",\"twitter:url\")||this.getSchemaProperty(y,\"url\")||this.getSchemaProperty(y,\"mainEntityOfPage.url\")||this.getSchemaProperty(y,\"mainEntity.url\")||this.getSchemaProperty(y,\"WebSite.url\")||((t=p.querySelector('link[rel=\"canonical\"]'))===null||t===void 0?void 0:t.getAttribute(\"href\"))||\"\"),o)try{n=new URL(o).hostname.replace(/^www\\./,\"\")}catch(e){console.warn(\"Failed to parse URL:\",e)}}catch{let r=p.querySelector(\"base[href]\");if(r)try{o=r.getAttribute(\"href\")||\"\",n=new URL(o).hostname.replace(/^www\\./,\"\")}catch(i){console.warn(\"Failed to parse base URL:\",i)}}return{title:this.getTitle(p,y,E),description:this.getDescription(p,y,E),domain:n,favicon:this.getFavicon(p,o,E),image:this.getImage(p,y,E),published:this.getPublished(p,y,E),author:this.getAuthor(p,y,E),site:this.getSite(p,y,E),schemaOrgData:y,wordCount:0,parseTime:0}}static getAuthor(p,y,E){let S;if(S=this.getMetaContent(E,\"name\",\"sailthru.author\")||this.getMetaContent(E,\"property\",\"author\")||this.getMetaContent(E,\"name\",\"author\")||this.getMetaContent(E,\"name\",\"byl\")||this.getMetaContent(E,\"name\",\"authorList\"),S)return S;let t=this.getMetaContents(E,\"name\",\"citation_author\");if(t.length===0&&(t=this.getMetaContents(E,\"property\",\"dc.creator\")),t.length>0)return S=t.map((e=>{if(!e.includes(\",\"))return e.trim();let r=/(.*),\\s(.*)/.exec(e);return r&&r.length===3?`${r[2]} ${r[1]}`:e.trim()})).join(\", \"),S;let n=this.getSchemaProperty(y,\"author.name\")||this.getSchemaProperty(y,\"author.[].name\");if(n){let e=n.split(\",\").map((r=>r.trim().replace(/,$/,\"\").trim())).filter(Boolean);if(e.length>0){let r=[...new Set(e)];return r.length>10&&(r=r.slice(0,10)),r.join(\", \")}}let o=[];if(['[itemprop=\"author\"]',\".author\",'[href*=\"author\"]',\".authors a\"].forEach((e=>{p.querySelectorAll(e).forEach((r=>{var i;(i=r.textContent)&&i.split(\",\").forEach((a=>{let l=a.trim().replace(/,$/,\"\").trim(),m=l.toLowerCase();l&&m!==\"author\"&&m!==\"authors\"&&o.push(l)}))}))})),o.length>0){let e=[...new Set(o.map((r=>r.trim())).filter(Boolean))];if(e.length>0)return e.length>10&&(e=e.slice(0,10)),e.join(\", \")}return S=this.getMetaContent(E,\"name\",\"copyright\")||this.getSchemaProperty(y,\"copyrightHolder.name\")||this.getMetaContent(E,\"property\",\"og:site_name\")||this.getSchemaProperty(y,\"publisher.name\")||this.getSchemaProperty(y,\"sourceOrganization.name\")||this.getSchemaProperty(y,\"isPartOf.name\")||this.getMetaContent(E,\"name\",\"twitter:creator\")||this.getMetaContent(E,\"name\",\"application-name\"),S||\"\"}static getSite(p,y,E){return this.getSchemaProperty(y,\"publisher.name\")||this.getMetaContent(E,\"property\",\"og:site_name\")||this.getSchemaProperty(y,\"WebSite.name\")||this.getSchemaProperty(y,\"sourceOrganization.name\")||this.getMetaContent(E,\"name\",\"copyright\")||this.getSchemaProperty(y,\"copyrightHolder.name\")||this.getSchemaProperty(y,\"isPartOf.name\")||this.getMetaContent(E,\"name\",\"application-name\")||this.getAuthor(p,y,E)||\"\"}static getTitle(p,y,E){var S,t;let n=this.getMetaContent(E,\"property\",\"og:title\")||this.getMetaContent(E,\"name\",\"twitter:title\")||this.getSchemaProperty(y,\"headline\")||this.getMetaContent(E,\"name\",\"title\")||this.getMetaContent(E,\"name\",\"sailthru.title\")||((t=(S=p.querySelector(\"title\"))===null||S===void 0?void 0:S.textContent)===null||t===void 0?void 0:t.trim())||\"\";return this.cleanTitle(n,this.getSite(p,y,E))}static cleanTitle(p,y){if(!p||!y)return p;let E=y.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\"),S=[`\\\\s*[\\\\|\\\\-\\u2013\\u2014]\\\\s*${E}\\\\s*$`,`^\\\\s*${E}\\\\s*[\\\\|\\\\-\\u2013\\u2014]\\\\s*`];for(let t of S){let n=new RegExp(t,\"i\");if(n.test(p)){p=p.replace(n,\"\");break}}return p.trim()}static getDescription(p,y,E){return this.getMetaContent(E,\"name\",\"description\")||this.getMetaContent(E,\"property\",\"description\")||this.getMetaContent(E,\"property\",\"og:description\")||this.getSchemaProperty(y,\"description\")||this.getMetaContent(E,\"name\",\"twitter:description\")||this.getMetaContent(E,\"name\",\"sailthru.description\")||\"\"}static getImage(p,y,E){return this.getMetaContent(E,\"property\",\"og:image\")||this.getMetaContent(E,\"name\",\"twitter:image\")||this.getSchemaProperty(y,\"image.url\")||this.getMetaContent(E,\"name\",\"sailthru.image.full\")||\"\"}static getFavicon(p,y,E){var S,t;let n=this.getMetaContent(E,\"property\",\"og:image:favicon\");if(n)return n;let o=(S=p.querySelector(\"link[rel='icon']\"))===null||S===void 0?void 0:S.getAttribute(\"href\");if(o)return o;let e=(t=p.querySelector(\"link[rel='shortcut icon']\"))===null||t===void 0?void 0:t.getAttribute(\"href\");if(e)return e;if(y)try{return new URL(\"/favicon.ico\",y).href}catch(r){console.warn(\"Failed to construct favicon URL:\",r)}return\"\"}static getPublished(p,y,E){var S,t;return this.getSchemaProperty(y,\"datePublished\")||this.getMetaContent(E,\"name\",\"publishDate\")||this.getMetaContent(E,\"property\",\"article:published_time\")||((t=(S=p.querySelector('abbr[itemprop=\"datePublished\"]'))===null||S===void 0?void 0:S.title)===null||t===void 0?void 0:t.trim())||this.getTimeElement(p)||this.getMetaContent(E,\"name\",\"sailthru.date\")||\"\"}static getMetaContent(p,y,E){var S;return(S=this.getMetaContents(p,y,E)[0])!==null&&S!==void 0?S:\"\"}static getMetaContents(p,y,E){return p.filter((S=>{let t=y===\"name\"?S.name:S.property;return(t==null?void 0:t.toLowerCase())===E.toLowerCase()})).map((S=>{var t,n;return(n=(t=S.content)===null||t===void 0?void 0:t.trim())!==null&&n!==void 0?n:\"\"}))}static getTimeElement(p){var y,E,S,t;let n=Array.from(p.querySelectorAll(\"time\"))[0];return n&&(t=(E=(y=n.getAttribute(\"datetime\"))===null||y===void 0?void 0:y.trim())!==null&&E!==void 0?E:(S=n.textContent)===null||S===void 0?void 0:S.trim())!==null&&t!==void 0?t:\"\"}static getSchemaProperty(p,y,E=\"\"){if(!p)return E;let S=(t,n,o,e=!0)=>{if(typeof t==\"string\")return n.length===0?[t]:[];if(!t||typeof t!=\"object\")return[];if(Array.isArray(t)){let a=n[0];if(/^\\\\[\\\\d+\\\\]$/.test(a)){let l=parseInt(a.slice(1,-1));return t[l]?S(t[l],n.slice(1),o,e):[]}return n.length===0&&t.every((l=>typeof l==\"string\"||typeof l==\"number\"))?t.map(String):t.flatMap((l=>S(l,n,o,e)))}let[r,...i]=n;if(!r)return typeof t==\"string\"?[t]:typeof t==\"object\"&&t.name?[t.name]:[];if(t.hasOwnProperty(r))return S(t[r],i,o?`${o}.${r}`:r,!0);if(!e){let a=[];for(let l in t)if(typeof t[l]==\"object\"){let m=S(t[l],n,o?`${o}.${l}`:l,!1);a.push(...m)}if(a.length>0)return a}return[]};try{let t=S(p,y.split(\".\"),\"\",!0);return t.length===0&&(t=S(p,y.split(\".\"),\"\",!1)),t.length>0?t.filter(Boolean).join(\", \"):E}catch(t){return console.error(`Error in getSchemaProperty for ${y}:`,t),E}}}},610:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.standardizeFootnotes=function(S){let t=S.ownerDocument;if(!t)return void console.warn(\"standardizeFootnotes: No document available\");new E(t).standardizeFootnotes(S)};let y=p(640);class E{constructor(t){this.doc=t}createFootnoteItem(t,n,o){let e=typeof n==\"string\"?this.doc:n.ownerDocument,r=e.createElement(\"li\");if(r.className=\"footnote\",r.id=`fn:${t}`,typeof n==\"string\"){let a=e.createElement(\"p\");a.innerHTML=n,r.appendChild(a)}else{let a=Array.from(n.querySelectorAll(\"p\"));if(a.length===0){let l=e.createElement(\"p\");l.innerHTML=n.innerHTML,r.appendChild(l)}else a.forEach((l=>{let m=e.createElement(\"p\");m.innerHTML=l.innerHTML,r.appendChild(m)}))}let i=r.querySelector(\"p:last-of-type\")||r;return o.forEach(((a,l)=>{let m=e.createElement(\"a\");m.href=`#${a}`,m.title=\"return to article\",m.className=\"footnote-backref\",m.innerHTML=\"\\u21A9\",l<o.length-1&&(m.innerHTML+=\" \"),i.appendChild(m)})),r}collectFootnotes(t){let n={},o=1,e=new Set;return t.querySelectorAll(y.FOOTNOTE_LIST_SELECTORS).forEach((r=>{if(r.matches('div.footnote[data-component-name=\"FootnoteToDOM\"]')){let i=r.querySelector(\"a.footnote-number\"),a=r.querySelector(\".footnote-content\");if(i&&a){let l=i.id.replace(\"footnote-\",\"\").toLowerCase();l&&!e.has(l)&&(n[o]={content:a,originalId:l,refs:[]},e.add(l),o++)}return}r.querySelectorAll('li, div[role=\"listitem\"]').forEach((i=>{var a,l,m,d;let b=\"\",h=null,T=i.querySelector(\".citations\");if(!((a=T==null?void 0:T.id)===null||a===void 0)&&a.toLowerCase().startsWith(\"r\")){b=T.id.toLowerCase();let u=T.querySelector(\".citation-content\");u&&(h=u)}else{if(i.id.toLowerCase().startsWith(\"bib.bib\"))b=i.id.replace(\"bib.bib\",\"\").toLowerCase();else if(i.id.toLowerCase().startsWith(\"fn:\"))b=i.id.replace(\"fn:\",\"\").toLowerCase();else if(i.id.toLowerCase().startsWith(\"fn\"))b=i.id.replace(\"fn\",\"\").toLowerCase();else if(i.hasAttribute(\"data-counter\"))b=((m=(l=i.getAttribute(\"data-counter\"))===null||l===void 0?void 0:l.replace(/\\.$/,\"\"))===null||m===void 0?void 0:m.toLowerCase())||\"\";else{let u=(d=i.id.split(\"/\").pop())===null||d===void 0?void 0:d.match(/cite_note-(.+)/);b=u?u[1].toLowerCase():i.id.toLowerCase()}h=i}b&&!e.has(b)&&(n[o]={content:h||i,originalId:b,refs:[]},e.add(b),o++)}))})),n}findOuterFootnoteContainer(t){let n=t,o=t.parentElement;for(;o&&(o.tagName.toLowerCase()===\"span\"||o.tagName.toLowerCase()===\"sup\");)n=o,o=o.parentElement;return n}createFootnoteReference(t,n){let o=this.doc.createElement(\"sup\");o.id=n;let e=this.doc.createElement(\"a\");return e.href=`#fn:${t}`,e.textContent=t,o.appendChild(e),o}standardizeFootnotes(t){let n=this.collectFootnotes(t),o=t.querySelectorAll(y.FOOTNOTE_INLINE_REFERENCES),e=new Map;o.forEach((a=>{var l,m,d,b;if(!a)return;let h=\"\",T=\"\";if(a.matches('a[id^=\"ref-link\"]'))h=((l=a.textContent)===null||l===void 0?void 0:l.trim())||\"\";else if(a.matches('a[role=\"doc-biblioref\"]')){let u=a.getAttribute(\"data-xml-rid\");if(u)h=u;else{let v=a.getAttribute(\"href\");v!=null&&v.startsWith(\"#core-R\")&&(h=v.replace(\"#core-\",\"\"))}}else if(a.matches(\"a.footnote-anchor, span.footnote-hovercard-target a\")){let u=((m=a.id)===null||m===void 0?void 0:m.replace(\"footnote-anchor-\",\"\"))||\"\";u&&(h=u.toLowerCase())}else if(a.matches(\"cite.ltx_cite\")){let u=a.querySelector(\"a\");if(u){let v=u.getAttribute(\"href\");if(v){let f=(d=v.split(\"/\").pop())===null||d===void 0?void 0:d.match(/bib\\.bib(\\d+)/);f&&(h=f[1].toLowerCase())}}}else if(a.matches(\"sup.reference\")){let u=a.querySelectorAll(\"a\");Array.from(u).forEach((v=>{var f;let C=v.getAttribute(\"href\");if(C){let _=(f=C.split(\"/\").pop())===null||f===void 0?void 0:f.match(/(?:cite_note|cite_ref)-(.+)/);_&&(h=_[1].toLowerCase())}}))}else if(a.matches('sup[id^=\"fnref:\"]'))h=a.id.replace(\"fnref:\",\"\").toLowerCase();else if(a.matches('sup[id^=\"fnr\"]'))h=a.id.replace(\"fnr\",\"\").toLowerCase();else if(a.matches(\"span.footnote-reference\"))h=a.getAttribute(\"data-footnote-id\")||\"\";else if(a.matches(\"span.footnote-link\"))h=a.getAttribute(\"data-footnote-id\")||\"\",T=a.getAttribute(\"data-footnote-content\")||\"\";else if(a.matches(\"a.citation\"))h=((b=a.textContent)===null||b===void 0?void 0:b.trim())||\"\",T=a.getAttribute(\"href\")||\"\";else if(a.matches('a[id^=\"fnref\"]'))h=a.id.replace(\"fnref\",\"\").toLowerCase();else{let u=a.getAttribute(\"href\");u&&(h=u.replace(/^[#]/,\"\").toLowerCase())}if(h){let u=Object.entries(n).find((([v,f])=>f.originalId===h.toLowerCase()));if(u){let[v,f]=u,C=f.refs.length>0?`fnref:${v}-${f.refs.length+1}`:`fnref:${v}`;f.refs.push(C);let _=this.findOuterFootnoteContainer(a);_.tagName.toLowerCase()===\"sup\"?(e.has(_)||e.set(_,[]),e.get(_).push(this.createFootnoteReference(v,C))):_.replaceWith(this.createFootnoteReference(v,C))}}})),e.forEach(((a,l)=>{if(a.length>0){let m=this.doc.createDocumentFragment();a.forEach((d=>{let b=d.querySelector(\"a\");if(b){let h=this.doc.createElement(\"sup\");h.id=d.id,h.appendChild(b.cloneNode(!0)),m.appendChild(h)}})),l.replaceWith(m)}}));let r=this.doc.createElement(\"div\");r.id=\"footnotes\";let i=this.doc.createElement(\"ol\");Object.entries(n).forEach((([a,l])=>{let m=this.createFootnoteItem(parseInt(a),l.content,l.refs);i.appendChild(m)})),t.querySelectorAll(y.FOOTNOTE_LIST_SELECTORS).forEach((a=>a.remove())),i.children.length>0&&(r.appendChild(i),t.appendChild(r))}}},628:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.Defuddle=void 0;let y=p(608),E=p(917),S=p(640),t=p(840),n=p(968),o=p(552);g.Defuddle=class{constructor(e,r={}){this.doc=e,this.options=r,this.debug=r.debug||!1}parse(){let e=this.parseInternal();if(e.wordCount<200){this._log(\"Initial parse returned very little content, trying again\");let r=this.parseInternal({removePartialSelectors:!1});if(r.wordCount>e.wordCount)return this._log(\"Retry produced more content\"),r}return e}parseInternal(e={}){var r,i,a;let l=Date.now(),m=Object.assign(Object.assign({removeExactSelectors:!0,removePartialSelectors:!0},this.options),e),d=this._extractSchemaOrgData(this.doc),b=[];this.doc.querySelectorAll(\"meta\").forEach((T=>{let u=T.getAttribute(\"name\"),v=T.getAttribute(\"property\"),f=T.getAttribute(\"content\");f&&b.push({name:u,property:v,content:this._decodeHTMLEntities(f)})}));let h=y.MetadataExtractor.extract(this.doc,d,b);m.removeImages&&this.removeImages(this.doc);try{let T=m.url||this.doc.URL,u=E.ExtractorRegistry.findExtractor(this.doc,T,d);if(u&&u.canExtract()){let R=u.extract(),B=Date.now();return{content:R.contentHtml,title:((r=R.variables)===null||r===void 0?void 0:r.title)||h.title,description:h.description,domain:h.domain,favicon:h.favicon,image:h.image,published:((i=R.variables)===null||i===void 0?void 0:i.published)||h.published,author:((a=R.variables)===null||a===void 0?void 0:a.author)||h.author,site:h.site,schemaOrgData:h.schemaOrgData,wordCount:this.countWords(R.contentHtml),parseTime:Math.round(B-l),extractorType:u.constructor.name.replace(\"Extractor\",\"\").toLowerCase(),metaTags:b}}let v=this._evaluateMediaQueries(this.doc),f=this.findSmallImages(this.doc),C=this.doc.cloneNode(!0);this.applyMobileStyles(C,v);let _=this.findMainContent(C);if(!_){let R=Date.now();return Object.assign(Object.assign({content:this.doc.body.innerHTML},h),{wordCount:this.countWords(this.doc.body.innerHTML),parseTime:Math.round(R-l),metaTags:b})}this.removeSmallImages(C,f),this.removeHiddenElements(C),n.ContentScorer.scoreAndRemove(C,this.debug),(m.removeExactSelectors||m.removePartialSelectors)&&this.removeBySelector(C,m.removeExactSelectors,m.removePartialSelectors),(0,t.standardizeContent)(_,h,this.doc,this.debug);let x=_.outerHTML,q=Date.now();return Object.assign(Object.assign({content:x},h),{wordCount:this.countWords(x),parseTime:Math.round(q-l),metaTags:b})}catch(T){console.error(\"Defuddle\",\"Error processing document:\",T);let u=Date.now();return Object.assign(Object.assign({content:this.doc.body.innerHTML},h),{wordCount:this.countWords(this.doc.body.innerHTML),parseTime:Math.round(u-l),metaTags:b})}}countWords(e){let r=this.doc.createElement(\"div\");return r.innerHTML=e,(r.textContent||\"\").trim().replace(/\\s+/g,\" \").split(\" \").filter((i=>i.length>0)).length}_log(...e){this.debug&&console.log(\"Defuddle:\",...e)}_evaluateMediaQueries(e){let r=[],i=/max-width[^:]*:\\s*(\\d+)/;try{Array.from(e.styleSheets).filter((l=>{try{return l.cssRules,!0}catch(m){return m instanceof DOMException&&m.name,!1}})).flatMap((l=>{try{return typeof CSSMediaRule>\"u\"?[]:Array.from(l.cssRules).filter((m=>m instanceof CSSMediaRule&&m.conditionText.includes(\"max-width\")))}catch(m){return this.debug&&console.warn(\"Defuddle: Failed to process stylesheet:\",m),[]}})).forEach((l=>{let m=l.conditionText.match(i);if(m){let d=parseInt(m[1]);S.MOBILE_WIDTH<=d&&Array.from(l.cssRules).filter((b=>b instanceof CSSStyleRule)).forEach((b=>{try{r.push({selector:b.selectorText,styles:b.style.cssText})}catch(h){this.debug&&console.warn(\"Defuddle: Failed to process CSS rule:\",h)}}))}}))}catch(a){console.error(\"Defuddle: Error evaluating media queries:\",a)}return r}applyMobileStyles(e,r){r.forEach((({selector:i,styles:a})=>{try{e.querySelectorAll(i).forEach((l=>{l.setAttribute(\"style\",(l.getAttribute(\"style\")||\"\")+a)}))}catch(l){console.error(\"Defuddle\",\"Error applying styles for selector:\",i,l)}}))}removeImages(e){let r=e.getElementsByTagName(\"img\");Array.from(r).forEach((i=>{i.remove()}))}removeHiddenElements(e){let r=0,i=new Set,a=Array.from(e.getElementsByTagName(\"*\"));for(let l=0;l<a.length;l+=100){let m=a.slice(l,l+100),d=m.map((b=>{var h,T;try{return(h=b.ownerDocument.defaultView)===null||h===void 0?void 0:h.getComputedStyle(b)}catch{let v=b.getAttribute(\"style\");if(!v)return null;let f=e.createElement(\"style\");f.textContent=`* { ${v} }`,e.head.appendChild(f);let C=(T=b.ownerDocument.defaultView)===null||T===void 0?void 0:T.getComputedStyle(b);return e.head.removeChild(f),C}}));m.forEach(((b,h)=>{let T=d[h];!T||T.display!==\"none\"&&T.visibility!==\"hidden\"&&T.opacity!==\"0\"||(i.add(b),r++)}))}i.forEach((l=>l.remove())),this._log(\"Removed hidden elements:\",r)}removeBySelector(e,r=!0,i=!0){let a=Date.now(),l=0,m=0,d=new Set;if(r&&e.querySelectorAll(S.EXACT_SELECTORS.join(\",\")).forEach((h=>{h!=null&&h.parentNode&&(d.add(h),l++)})),i){let h=S.PARTIAL_SELECTORS.join(\"|\"),T=new RegExp(h,\"i\"),u=S.TEST_ATTRIBUTES.map((v=>`[${v}]`)).join(\",\");e.querySelectorAll(u).forEach((v=>{if(d.has(v))return;let f=S.TEST_ATTRIBUTES.map((C=>C===\"class\"?v.className&&typeof v.className==\"string\"?v.className:\"\":C===\"id\"?v.id||\"\":v.getAttribute(C)||\"\")).join(\" \").toLowerCase();f.trim()&&T.test(f)&&(d.add(v),m++)}))}d.forEach((h=>h.remove()));let b=Date.now();this._log(\"Removed clutter elements:\",{exactSelectors:l,partialSelectors:m,total:d.size,processingTime:`${(b-a).toFixed(2)}ms`})}findSmallImages(e){let r=new Set,i=/scale\\(([\\d.]+)\\)/,a=Date.now(),l=0,m=[...Array.from(e.getElementsByTagName(\"img\")),...Array.from(e.getElementsByTagName(\"svg\"))];if(m.length===0)return r;let d=m.map((h=>({element:h,naturalWidth:h.tagName.toLowerCase()===\"img\"&&parseInt(h.getAttribute(\"width\")||\"0\")||0,naturalHeight:h.tagName.toLowerCase()===\"img\"&&parseInt(h.getAttribute(\"height\")||\"0\")||0,attrWidth:parseInt(h.getAttribute(\"width\")||\"0\"),attrHeight:parseInt(h.getAttribute(\"height\")||\"0\")})));for(let h=0;h<d.length;h+=50){let T=d.slice(h,h+50);try{let u=T.map((({element:f})=>{var C;try{return(C=f.ownerDocument.defaultView)===null||C===void 0?void 0:C.getComputedStyle(f)}catch{return null}})),v=T.map((({element:f})=>{try{return f.getBoundingClientRect()}catch{return null}}));T.forEach(((f,C)=>{var _;try{let x=u[C],q=v[C];if(!x)return;let R=x.transform,B=R?parseFloat(((_=R.match(i))===null||_===void 0?void 0:_[1])||\"1\"):1,s=[f.naturalWidth,f.attrWidth,parseInt(x.width)||0,q?q.width*B:0].filter((A=>typeof A==\"number\"&&A>0)),w=[f.naturalHeight,f.attrHeight,parseInt(x.height)||0,q?q.height*B:0].filter((A=>typeof A==\"number\"&&A>0));if(s.length>0&&w.length>0){let A=Math.min(...s),N=Math.min(...w);if(A<33||N<33){let I=this.getElementIdentifier(f.element);I&&(r.add(I),l++)}}}catch(x){this.debug&&console.warn(\"Defuddle: Failed to process element dimensions:\",x)}}))}catch(u){this.debug&&console.warn(\"Defuddle: Failed to process batch:\",u)}}let b=Date.now();return this._log(\"Found small elements:\",{count:l,processingTime:`${(b-a).toFixed(2)}ms`}),r}removeSmallImages(e,r){let i=0;[\"img\",\"svg\"].forEach((a=>{let l=e.getElementsByTagName(a);Array.from(l).forEach((m=>{let d=this.getElementIdentifier(m);d&&r.has(d)&&(m.remove(),i++)}))})),this._log(\"Removed small elements:\",i)}getElementIdentifier(e){if(e.tagName.toLowerCase()===\"img\"){let l=e.getAttribute(\"data-src\");if(l)return`src:${l}`;let m=e.getAttribute(\"src\")||\"\",d=e.getAttribute(\"srcset\")||\"\",b=e.getAttribute(\"data-srcset\");if(m)return`src:${m}`;if(d)return`srcset:${d}`;if(b)return`srcset:${b}`}let r=e.id||\"\",i=e.className||\"\",a=e.tagName.toLowerCase()===\"svg\"&&e.getAttribute(\"viewBox\")||\"\";return r?`id:${r}`:a?`viewBox:${a}`:i?`class:${i}`:null}findMainContent(e){let r=[];if(S.ENTRY_POINT_ELEMENTS.forEach(((i,a)=>{e.querySelectorAll(i).forEach((l=>{let m=40*(S.ENTRY_POINT_ELEMENTS.length-a);m+=n.ContentScorer.scoreElement(l),r.push({element:l,score:m})}))})),r.length===0)return this.findContentByScoring(e);if(r.sort(((i,a)=>a.score-i.score)),this.debug&&this._log(\"Content candidates:\",r.map((i=>({element:i.element.tagName,selector:this.getElementSelector(i.element),score:i.score})))),r.length===1&&r[0].element.tagName.toLowerCase()===\"body\"){let i=this.findTableBasedContent(e);if(i)return i}return r[0].element}findTableBasedContent(e){if(!Array.from(e.getElementsByTagName(\"table\")).some((i=>{let a=parseInt(i.getAttribute(\"width\")||\"0\"),l=this.getComputedStyle(i);return a>400||(l==null?void 0:l.width.includes(\"px\"))&&parseInt(l.width)>400||i.getAttribute(\"align\")===\"center\"||i.className.toLowerCase().includes(\"content\")||i.className.toLowerCase().includes(\"article\")})))return null;let r=Array.from(e.getElementsByTagName(\"td\"));return n.ContentScorer.findBestElement(r)}findContentByScoring(e){let r=[];return S.BLOCK_ELEMENTS.forEach((i=>{Array.from(e.getElementsByTagName(i)).forEach((a=>{let l=n.ContentScorer.scoreElement(a);l>0&&r.push({score:l,element:a})}))})),r.length>0?r.sort(((i,a)=>a.score-i.score))[0].element:null}getElementSelector(e){let r=[],i=e;for(;i&&i!==this.doc.documentElement;){let a=i.tagName.toLowerCase();i.id?a+=\"#\"+i.id:i.className&&typeof i.className==\"string\"&&(a+=\".\"+i.className.trim().split(/\\s+/).join(\".\")),r.unshift(a),i=i.parentElement}return r.join(\" > \")}getComputedStyle(e){return(0,o.getComputedStyle)(e)}_extractSchemaOrgData(e){let r=e.querySelectorAll('script[type=\"application/ld+json\"]'),i=[];r.forEach((l=>{let m=l.textContent||\"\";try{m=m.replace(/\\/\\*[\\s\\S]*?\\*\\/|^\\s*\\/\\/.*$/gm,\"\").replace(/^\\s*<!\\[CDATA\\[([\\s\\S]*?)\\]\\]>\\s*$/,\"$1\").replace(/^\\s*(\\*\\/|\\/\\*)\\s*|\\s*(\\*\\/|\\/\\*)\\s*$/g,\"\").trim();let d=JSON.parse(m);d[\"@graph\"]&&Array.isArray(d[\"@graph\"])?i.push(...d[\"@graph\"]):i.push(d)}catch(d){console.error(\"Defuddle: Error parsing schema.org data:\",d),this.debug&&console.error(\"Defuddle: Problematic JSON content:\",m)}}));let a=l=>{if(typeof l==\"string\")return this._decodeHTMLEntities(l);if(Array.isArray(l))return l.map(a);if(typeof l==\"object\"&&l!==null){let m={};for(let d in l)Object.prototype.hasOwnProperty.call(l,d)&&(m[d]=a(l[d]));return m}return l};return i.map(a)}_decodeHTMLEntities(e){let r=this.doc.createElement(\"textarea\");return r.innerHTML=e,r.value}}},632:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ChatGPTExtractor=void 0;let y=p(181);class E extends y.ConversationExtractor{constructor(t,n){super(t,n),this.articles=t.querySelectorAll('article[data-testid^=\"conversation-turn-\"]'),this.footnotes=[],this.footnoteCounter=0}canExtract(){return!!this.articles&&this.articles.length>0}extractMessages(){let t=[];return this.footnotes=[],this.footnoteCounter=0,this.articles&&this.articles.forEach((n=>{var o,e;let r=n.querySelector(\"h5.sr-only, h6.sr-only\"),i=((e=(o=r==null?void 0:r.textContent)===null||o===void 0?void 0:o.trim())===null||e===void 0?void 0:e.replace(/:\\s*$/,\"\"))||\"\",a=\"\",l=n.getAttribute(\"data-message-author-role\");l&&(a=l);let m=n.innerHTML||\"\";m=m.replace(/\\u200B/g,\"\");let d=document.createElement(\"div\");d.innerHTML=m,d.querySelectorAll('h5.sr-only, h6.sr-only, span[data-state=\"closed\"]').forEach((b=>b.remove())),m=d.innerHTML,m=m.replace(/(&ZeroWidthSpace;)?(<span[^>]*?>\\s*<a(?=[^>]*?href=\"([^\"]+)\")(?=[^>]*?target=\"_blank\")(?=[^>]*?rel=\"noopener\")[^>]*?>[\\s\\S]*?<\\/a>\\s*<\\/span>)/gi,((b,h,T,u)=>{let v=\"\",f=\"\";try{v=new URL(u).hostname.replace(/^www\\./,\"\");let x=u.split(\"#:~:text=\");if(x.length>1){f=decodeURIComponent(x[1]),f=f.replace(/%2C/g,\",\");let q=f.split(\",\");f=q.length>1&&q[0].trim()?` \\u2014 ${q[0].trim()}...`:q[0].trim()?` \\u2014 ${f.trim()}`:\"\"}}catch(x){console.error(`Failed to parse URL: ${u}`,x),v=u}let C,_=this.footnotes.findIndex((x=>x.url===u));return _===-1?(this.footnoteCounter++,C=this.footnoteCounter,this.footnotes.push({url:u,text:`<a href=\"${u}\">${v}</a>${f}`})):C=_+1,`<sup id=\"fnref:${C}\"><a href=\"#fn:${C}\">${C}</a></sup>`})),m=m.replace(/<p[^>]*>\\s*<\\/p>/g,\"\"),t.push({author:i,content:m.trim(),metadata:{role:a||\"unknown\"}})})),t}getFootnotes(){return this.footnotes}getMetadata(){let t=this.getTitle(),n=this.extractMessages();return{title:t,site:\"ChatGPT\",url:this.url,messageCount:n.length,description:`ChatGPT conversation with ${n.length} messages`}}getTitle(){var t,n,o;let e=(t=this.document.title)===null||t===void 0?void 0:t.trim();if(e&&e!==\"ChatGPT\")return e;let r=(o=(n=this.articles)===null||n===void 0?void 0:n.item(0))===null||o===void 0?void 0:o.querySelector(\".text-message\");if(r){let i=r.textContent||\"\";return i.length>50?i.slice(0,50)+\"...\":i}return\"ChatGPT Conversation\"}}g.ChatGPTExtractor=E},640:(P,g)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ALLOWED_ATTRIBUTES_DEBUG=g.ALLOWED_ATTRIBUTES=g.ALLOWED_EMPTY_ELEMENTS=g.FOOTNOTE_LIST_SELECTORS=g.FOOTNOTE_INLINE_REFERENCES=g.PARTIAL_SELECTORS=g.TEST_ATTRIBUTES=g.EXACT_SELECTORS=g.INLINE_ELEMENTS=g.PRESERVE_ELEMENTS=g.BLOCK_ELEMENTS=g.MOBILE_WIDTH=g.ENTRY_POINT_ELEMENTS=void 0,g.ENTRY_POINT_ELEMENTS=[\"#post\",\".post-content\",\".article-content\",\"#article-content\",\".article_post\",\".article-wrapper\",\".entry-content\",\".content-article\",\".post\",\".markdown-body\",\"article\",'[role=\"article\"]',\"main\",'[role=\"main\"]',\"body\"],g.MOBILE_WIDTH=600,g.BLOCK_ELEMENTS=[\"div\",\"section\",\"article\",\"main\",\"aside\",\"header\",\"footer\",\"nav\",\"content\"],g.PRESERVE_ELEMENTS=new Set([\"pre\",\"code\",\"table\",\"thead\",\"tbody\",\"tr\",\"td\",\"th\",\"ul\",\"ol\",\"li\",\"dl\",\"dt\",\"dd\",\"figure\",\"figcaption\",\"picture\",\"details\",\"summary\",\"blockquote\",\"form\",\"fieldset\"]),g.INLINE_ELEMENTS=new Set([\"a\",\"span\",\"strong\",\"em\",\"i\",\"b\",\"u\",\"code\",\"br\",\"small\",\"sub\",\"sup\",\"mark\",\"date\",\"del\",\"ins\",\"q\",\"abbr\",\"cite\",\"relative-time\",\"time\",\"font\"]),g.EXACT_SELECTORS=[\"noscript\",'script:not([type^=\"math/\"])',\"style\",\"meta\",\"link\",'.ad:not([class*=\"gradient\"])','[class^=\"ad-\" i]','[class$=\"-ad\" i]','[id^=\"ad-\" i]','[id$=\"-ad\" i]','[role=\"banner\" i]','[alt*=\"advert\" i]',\".promo\",\".Promo\",\"#barrier-page\",\".alert\",'[id=\"comments\" i]','[id=\"comment\" i]',\"header\",\".header:not(.banner)\",\"#header\",\"#Header\",\"#banner\",\"#Banner\",\"nav\",\".navigation\",\"#navigation\",\".hero\",'[role=\"navigation\" i]','[role=\"dialog\" i]','[role*=\"complementary\" i]','[class*=\"pagination\" i]',\".menu\",\"#menu\",\"#siteSub\",\".previous\",\".author\",\".Author\",'[class$=\"_bio\"]',\"#categories\",\".contributor\",\".date\",\"#date\",\"[data-date]\",\".entry-meta\",\".meta\",\".tags\",\"#tags\",\".toc\",\".Toc\",\"#toc\",\".headline\",\"#headline\",\"#title\",\"#Title\",\"#articleTag\",'[href*=\"/category\"]','[href*=\"/categories\"]','[href*=\"/tag/\"]','[href*=\"/tags/\"]','[href*=\"/topics\"]','[href*=\"author\"]','[href*=\"#toc\"]','[href=\"#top\"]','[href=\"#Top\"]','[href=\"#page-header\"]','[href=\"#content\"]','[href=\"#site-content\"]','[href=\"#main-content\"]','[href^=\"#main\"]','[src*=\"author\"]',\"footer\",\".aside\",\"aside\",\"button\",\"canvas\",\"date\",\"dialog\",\"fieldset\",\"form\",'input:not([type=\"checkbox\"])',\"label\",\"option\",\"select\",\"textarea\",\"time\",\"relative-time\",\"[hidden]\",'[aria-hidden=\"true\"]:not([class*=\"math\"])','[style*=\"display: none\"]:not([class*=\"math\"])','[style*=\"display:none\"]:not([class*=\"math\"])','[style*=\"visibility: hidden\"]','[style*=\"visibility:hidden\"]',\".hidden\",\".invisible\",\"instaread-player\",'iframe:not([src*=\"youtube\"]):not([src*=\"youtu.be\"]):not([src*=\"vimeo\"]):not([src*=\"twitter\"]):not([src*=\"x.com\"]):not([src*=\"datawrapper\"])','[class=\"logo\" i]',\"#logo\",\"#Logo\",\"#newsletter\",\"#Newsletter\",\".subscribe\",\".noprint\",'[data-print-layout=\"hide\" i]','[data-block=\"donotprint\" i]','[class*=\"clickable-icon\" i]','li span[class*=\"ltx_tag\" i][class*=\"ltx_tag_item\" i]','a[href^=\"#\"][class*=\"anchor\" i]','a[href^=\"#\"][class*=\"ref\" i]','[data-container*=\"most-viewed\" i]',\".sidebar\",\".Sidebar\",\"#sidebar\",\"#Sidebar\",\"#sitesub\",'[data-link-name*=\"skip\" i]','[aria-label*=\"skip\" i]',\".copyright\",\"#copyright\",\"#rss\",\"#feed\",\".gutter\",\"#primaryaudio\",\"#NYT_ABOVE_MAIN_CONTENT_REGION\",'[data-testid=\"photoviewer-children-figure\"] > span',\"table.infobox\",\".pencraft:not(.pc-display-contents)\",'[data-optimizely=\"related-articles-section\" i]','[data-orientation=\"vertical\"]',\".gh-header-sticky\",'[data-testid=\"issue-metadata-sticky\"]'],g.TEST_ATTRIBUTES=[\"class\",\"id\",\"data-test\",\"data-testid\",\"data-test-id\",\"data-qa\",\"data-cy\"],g.PARTIAL_SELECTORS=[\"a-statement\",\"access-wall\",\"activitypub\",\"actioncall\",\"addcomment\",\"advert\",\"adlayout\",\"ad-tldr\",\"ad-placement\",\"ads-container\",\"_ad_\",\"after_content\",\"after_main_article\",\"afterpost\",\"allterms\",\"-alert-\",\"alert-box\",\"appendix\",\"_archive\",\"around-the-web\",\"aroundpages\",\"article-author\",\"article-badges\",\"article-banner\",\"article-bottom-section\",\"article-bottom\",\"article-category\",\"article-card\",\"article-citation\",\"article__copy\",\"article_date\",\"article-date\",\"article-end \",\"article_header\",\"article-header\",\"article__header\",\"article__hero\",\"article__info\",\"article-info\",\"article-meta\",\"article_meta\",\"article__meta\",\"articlename\",\"article-subject\",\"article_subject\",\"article-snippet\",\"article-separator\",\"article--share\",\"article--topics\",\"articletags\",\"article-tags\",\"article_tags\",\"articletitle\",\"article-title\",\"article_title\",\"articletopics\",\"article-topics\",\"article--lede\",\"articlewell\",\"associated-people\",\"audio-card\",\"author-bio\",\"author-box\",\"author-info\",\"author_info\",\"authorm\",\"author-mini-bio\",\"author-name\",\"author-publish-info\",\"authored-by\",\"avatar\",\"back-to-top\",\"backlink_container\",\"backlinks-section\",\"bio-block\",\"biobox\",\"blog-pager\",\"bookmark-\",\"-bookmark\",\"bottominfo\",\"bottomnav\",\"bottom-of-article\",\"bottom-wrapper\",\"brand-bar\",\"breadcrumb\",\"brdcrumb\",\"button-wrapper\",\"buttons-container\",\"btn-\",\"-btn\",\"byline\",\"captcha\",\"card-text\",\"card-media\",\"card-post\",\"carouselcontainer\",\"carousel-container\",\"cat_header\",\"catlinks\",\"_categories\",\"card-author\",\"card-content\",\"chapter-list\",\"collections\",\"comments\",\"commentbox\",\"comment-button\",\"commentcomp\",\"comment-content\",\"comment-count\",\"comment-form\",\"comment-number\",\"comment-respond\",\"comment-thread\",\"comment-wrap\",\"complementary\",\"consent\",\"contact-\",\"content-card\",\"content-topics\",\"contentpromo\",\"context-bar\",\"context-widget\",\"core-collateral\",\"cover-\",\"created-date\",\"creative-commons_\",\"c-subscribe\",\"_cta\",\"-cta\",\"cta-\",\"cta_\",\"current-issue\",\"custom-list-number\",\"dateline\",\"dateheader\",\"date-header\",\"date-pub\",\"disclaimer\",\"disclosure\",\"discussion\",\"discuss_\",\"disqus\",\"donate\",\"donation\",\"dropdown\",\"eletters\",\"emailsignup\",\"engagement-widget\",\"enhancement\",\"entry-author-info\",\"entry-categories\",\"entry-date\",\"entry-title\",\"entry-utility\",\"-error\",\"error-\",\"eyebrow\",\"expand-reduce\",\"external-anchor\",\"externallinkembedwrapper\",\"extra-services\",\"extra-title\",\"facebook\",\"fancy-box\",\"favorite\",\"featured-content\",\"feature_feed\",\"feedback\",\"feed-links\",\"field-site-sections\",\"fixheader\",\"floating-vid\",\"follower\",\"footer\",\"footnote-back\",\"footnoteback\",\"form-group\",\"for-you\",\"frontmatter\",\"further-reading\",\"fullbleedheader\",\"gated-\",\"gh-feed\",\"gist-meta\",\"goog-\",\"graph-view\",\"hamburger\",\"header_logo\",\"header-logo\",\"header-pattern\",\"hero-list\",\"hide-for-print\",\"hide-print\",\"hide-when-no-script\",\"hidden-print\",\"hidden-sidenote\",\"hidden-accessibility\",\"infoline\",\"instacartIntegration\",\"interlude\",\"interaction\",\"itemendrow\",\"invisible\",\"jumplink\",\"jump-to-\",\"js-skip-to-content\",\"keepreading\",\"keep-reading\",\"keep_reading\",\"keyword_wrap\",\"kicker\",\"labstab\",\"-labels\",\"language-name\",\"lastupdated\",\"latest-content\",\"-ledes-\",\"-license\",\"license-\",\"lightbox-popup\",\"like-button\",\"link-box\",\"links-grid\",\"links-title\",\"listing-dynamic-terms\",\"list-tags\",\"listinks\",\"loading\",\"loa-info\",\"logo_container\",\"ltx_role_refnum\",\"ltx_tag_bibitem\",\"ltx_error\",\"masthead\",\"marketing\",\"media-inquiry\",\"-menu\",\"menu-\",\"metadata\",\"might-like\",\"minibio\",\"more-about\",\"_modal\",\"-modal\",\"more-\",\"morenews\",\"morestories\",\"more_wrapper\",\"most-read\",\"move-helper\",\"mw-editsection\",\"mw-cite-backlink\",\"mw-indicators\",\"mw-jump-link\",\"nav-\",\"nav_\",\"navigation-post\",\"next-\",\"newsgallery\",\"news-story-title\",\"newsletter_\",\"newsletterbanner\",\"newslettercontainer\",\"newsletter-form\",\"newsletter-signup\",\"newslettersignup\",\"newsletterwidget\",\"newsletterwrapper\",\"not-found\",\"notessection\",\"nomobile\",\"noprint\",\"open-slideshow\",\"originally-published\",\"other-blogs\",\"outline-view\",\"pagehead\",\"page-header\",\"page-title\",\"paywall_message\",\"-partners\",\"permission-\",\"plea\",\"popular\",\"popup_links\",\"pop_stories\",\"pop-up\",\"post-author\",\"post-bottom\",\"post__category\",\"postcomment\",\"postdate\",\"post-date\",\"post_date\",\"post-details\",\"post-feeds\",\"postinfo\",\"post-info\",\"post_info\",\"post-inline-date\",\"post-links\",\"postlist\",\"post_list\",\"post_meta\",\"post-meta\",\"postmeta\",\"post_more\",\"postnavi\",\"post-navigation\",\"postpath\",\"post-preview\",\"postsnippet\",\"post_snippet\",\"post-snippet\",\"post-subject\",\"posttax\",\"post-tax\",\"post_tax\",\"posttag\",\"post_tag\",\"post-tag\",\"post_time\",\"posttitle\",\"post-title\",\"post_title\",\"post__title\",\"post-ufi-button\",\"prev-post\",\"prevnext\",\"prev_next\",\"prev-next\",\"previousnext\",\"press-inquiries\",\"print-none\",\"print-header\",\"print:hidden\",\"privacy-notice\",\"privacy-settings\",\"profile\",\"promo_article\",\"promo-bar\",\"promo-box\",\"pubdate\",\"pub_date\",\"pub-date\",\"publish_date\",\"publish-date\",\"publication-date\",\"publicationName\",\"qr-code\",\"qr_code\",\"quick_up\",\"_rail\",\"ratingssection\",\"read_also\",\"readmore\",\"read-next\",\"read_next\",\"read_time\",\"read-time\",\"reading_time\",\"reading-time\",\"reading-list\",\"recent-\",\"recent-articles\",\"recentpost\",\"recent_post\",\"recent-post\",\"recommend\",\"redirectedfrom\",\"recirc\",\"register\",\"related\",\"relevant\",\"reversefootnote\",\"_rss\",\"rss-link\",\"screen-reader-text\",\"scroll_to\",\"scroll-to\",\"_search\",\"-search\",\"section-nav\",\"series-banner\",\"share-box\",\"sharedaddy\",\"share-icons\",\"sharelinks\",\"share-post\",\"share-print\",\"share-section\",\"show-for-print\",\"sidebartitle\",\"sidebar-content\",\"sidebar-wrapper\",\"sideitems\",\"sidebar-author\",\"sidebar-item\",\"side-box\",\"side-logo\",\"sign-in-gate\",\"similar-\",\"similar_\",\"similars-\",\"site-index\",\"site-header\",\"siteheader\",\"site-logo\",\"site-name\",\"site-wordpress\",\"skip-content\",\"skip-to-content\",\"skip-link\",\"c-skip-link\",\"_skip-link\",\"-slider\",\"slug-wrap\",\"social-author\",\"social-shar\",\"social-date\",\"speechify-ignore\",\"speedbump\",\"sponsor\",\"springercitation\",\"sr-only\",\"_stats\",\"story-date\",\"story-navigation\",\"storyreadtime\",\"storysmall\",\"storypublishdate\",\"subject-label\",\"subhead\",\"submenu\",\"-subscribe-\",\"subscriber-drive\",\"subscription-\",\"_tags\",\"tags__item\",\"tag_list\",\"taxonomy\",\"table-of-contents\",\"tabs-\",\"terminaltout\",\"time-rubric\",\"timestamp\",\"time-read\",\"time-to-read\",\"tip_off\",\"tiptout\",\"-tout-\",\"toc-container\",\"toggle-caption\",\"tooltip\",\"topbar\",\"topic-list\",\"topic-subnav\",\"top-wrapper\",\"tree-item\",\"trending\",\"trust-feat\",\"trust-badge\",\"trust-project\",\"twitter\",\"u-hide\",\"upsell\",\"viewbottom\",\"visually-hidden\",\"welcomebox\",\"widget_pages\"],g.FOOTNOTE_INLINE_REFERENCES=[\"sup.reference\",\"cite.ltx_cite\",'sup[id^=\"fnr\"]','span[id^=\"fnr\"]','span[class*=\"footnote_ref\"]',\"span.footnote-link\",\"a.citation\",'a[id^=\"ref-link\"]','a[href^=\"#fn\"]','a[href^=\"#cite\"]','a[href^=\"#reference\"]','a[href^=\"#footnote\"]','a[href^=\"#r\"]','a[href^=\"#b\"]','a[href*=\"cite_note\"]','a[href*=\"cite_ref\"]',\"a.footnote-anchor\",\"span.footnote-hovercard-target a\",'a[role=\"doc-biblioref\"]','a[id^=\"fnref\"]','a[id^=\"ref-link\"]'].join(\",\"),g.FOOTNOTE_LIST_SELECTORS=[\"div.footnote ol\",\"div.footnotes ol\",'div[role=\"doc-endnotes\"]','div[role=\"doc-footnotes\"]',\"ol.footnotes-list\",\"ol.footnotes\",\"ol.references\",'ol[class*=\"article-references\"]',\"section.footnotes ol\",'section[role=\"doc-endnotes\"]','section[role=\"doc-footnotes\"]','section[role=\"doc-bibliography\"]',\"ul.footnotes-list\",\"ul.ltx_biblist\",'div.footnote[data-component-name=\"FootnoteToDOM\"]'].join(\",\"),g.ALLOWED_EMPTY_ELEMENTS=new Set([\"area\",\"audio\",\"base\",\"br\",\"circle\",\"col\",\"defs\",\"ellipse\",\"embed\",\"figure\",\"g\",\"hr\",\"iframe\",\"img\",\"input\",\"line\",\"link\",\"mask\",\"meta\",\"object\",\"param\",\"path\",\"pattern\",\"picture\",\"polygon\",\"polyline\",\"rect\",\"source\",\"stop\",\"svg\",\"td\",\"th\",\"track\",\"use\",\"video\",\"wbr\"]),g.ALLOWED_ATTRIBUTES=new Set([\"alt\",\"allow\",\"allowfullscreen\",\"aria-label\",\"checked\",\"colspan\",\"controls\",\"data-latex\",\"data-src\",\"data-srcset\",\"data-lang\",\"dir\",\"display\",\"frameborder\",\"headers\",\"height\",\"href\",\"kind\",\"label\",\"lang\",\"role\",\"rowspan\",\"src\",\"srclang\",\"srcset\",\"title\",\"type\",\"width\",\"accent\",\"accentunder\",\"align\",\"columnalign\",\"columnlines\",\"columnspacing\",\"columnspan\",\"data-mjx-texclass\",\"depth\",\"displaystyle\",\"fence\",\"frame\",\"framespacing\",\"linethickness\",\"lspace\",\"mathsize\",\"mathvariant\",\"maxsize\",\"minsize\",\"movablelimits\",\"notation\",\"rowalign\",\"rowlines\",\"rowspacing\",\"rowspan\",\"rspace\",\"scriptlevel\",\"separator\",\"stretchy\",\"symmetric\",\"voffset\",\"xmlns\"]),g.ALLOWED_ATTRIBUTES_DEBUG=new Set([\"class\",\"id\"])},649:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.imageRules=void 0;let y=p(552),E=/^data:image\\/([^;]+);base64,/,S=/\\.(jpg|jpeg|png|webp)\\s+\\d/,t=/^\\s*\\S+\\.(jpg|jpeg|png|webp)\\S*\\s*$/,n=/\\.(jpg|jpeg|png|webp|gif|avif)(\\?.*)?$/i,o=/\\s(\\d+)w/,e=/dpr=(\\d+(?:\\.\\d+)?)/,r=/^([^\\s]+)/,i=/^[\\w\\-\\.\\/\\\\]+\\.(jpg|jpeg|png|gif|webp|svg)$/i,a=/^\\d{4}-\\d{2}-\\d{2}$/;function l(s,w,A){let N=A.createElement(\"figure\");N.appendChild(s.cloneNode(!0));let I=A.createElement(\"figcaption\"),M=(function(O){let L=[],j=new Set,W=z=>{var X;if((0,y.isTextNode)(z)){let J=((X=z.textContent)===null||X===void 0?void 0:X.trim())||\"\";J&&!j.has(J)&&(L.push(J),j.add(J))}else if((0,y.isElement)(z)){let J=z.childNodes;for(let Z=0;Z<J.length;Z++)W(J[Z])}},Y=O.childNodes;for(let z=0;z<Y.length;z++)W(Y[z]);return L.length>0?L.join(\" \"):O.innerHTML})(w);return I.innerHTML=M,N.appendChild(I),N}function m(s,w){w.setAttribute(\"srcset\",s);let A=R(s);A&&T(A)&&w.setAttribute(\"src\",A)}function d(s,w,A){for(let N=0;N<s.attributes.length;N++){let I=s.attributes[N];A.includes(I.name)||w.setAttribute(I.name,I.value)}}function b(s){let w=s.match(E);if(!w||w[1]===\"svg+xml\")return!1;let A=w[0].length;return s.length-A<133}function h(s){return s.startsWith(\"data:image/svg+xml\")}function T(s){return!s.startsWith(\"data:\")&&!(!s||s.trim()===\"\")&&(n.test(s)||s.includes(\"image\")||s.includes(\"img\")||s.includes(\"photo\"))}function u(s){return v(s)?!0:s.querySelectorAll(\"img, video, picture, source\").length>0}function v(s){let w=s.tagName.toLowerCase();return w===\"img\"||w===\"video\"||w===\"picture\"||w===\"source\"}function f(s){if(v(s))return s;let w=s.querySelectorAll(\"picture\");if(w.length>0)return w[0];let A=s.querySelectorAll(\"img\"),N=[];for(let L=0;L<A.length;L++){let j=A[L],W=j.getAttribute(\"src\")||\"\",Y=j.getAttribute(\"alt\")||\"\";W.includes(\"data:image/svg+xml\")||b(W)||!Y.trim()&&A.length>1||N.push(j)}if(N.length>0)return N[0];let I=s.querySelectorAll(\"video\");if(I.length>0)return I[0];let M=s.querySelectorAll(\"source\");if(M.length>0)return M[0];let O=s.querySelectorAll(\"img, picture, source, video\");return O.length>0?O[0]:null}function C(s){var w,A,N,I;let M=s.querySelector(\"figcaption\");if(M)return M;let O=new Set,L=['[class*=\"caption\"]','[class*=\"description\"]','[class*=\"alt\"]','[class*=\"title\"]','[class*=\"credit\"]','[class*=\"text\"]','[class*=\"post-thumbnail-text\"]','[class*=\"image-caption\"]','[class*=\"photo-caption\"]',\"[aria-label]\",\"[title]\"].join(\", \"),j=s.querySelectorAll(L);for(let z=0;z<j.length;z++){let X=j[z];if(v(X))continue;let J=(w=X.textContent)===null||w===void 0?void 0:w.trim();if(J&&J.length>0&&!O.has(J))return O.add(J),X}let W=s.querySelector(\"img\");if(W&&W.hasAttribute(\"alt\")){let z=W.getAttribute(\"alt\");if(z&&z.trim().length>0){let X=s.ownerDocument.createElement(\"div\");return X.textContent=z,X}}if(s.parentElement){let z=s.parentElement.children;for(let X=0;X<z.length;X++){let J=z[X];if(J!==s&&Array.from(J.classList).some((Z=>Z.includes(\"caption\")||Z.includes(\"credit\")||Z.includes(\"text\")||Z.includes(\"description\")))){let Z=(A=J.textContent)===null||A===void 0?void 0:A.trim();if(Z&&Z.length>0)return J}}}let Y=s.querySelectorAll(\"img\");for(let z=0;z<Y.length;z++){let X=Y[z];if(!X.parentElement)continue;let J=X.nextElementSibling;for(;J;){if([\"EM\",\"STRONG\",\"SPAN\",\"I\",\"B\",\"SMALL\",\"CITE\"].includes(J.tagName)){let Z=(N=J.textContent)===null||N===void 0?void 0:N.trim();if(Z&&Z.length>0)return J}J=J.nextElementSibling}}for(let z=0;z<Y.length;z++){let X=Y[z],J=X.parentElement;if(!J)continue;let Z=J.querySelectorAll(\"em, strong, span, i, b, small, cite\");for(let Et=0;Et<Z.length;Et++){let bt=Z[Et];if(bt===X)continue;let mt=(I=bt.textContent)===null||I===void 0?void 0:I.trim();if(mt&&mt.length>0)return bt}}return null}function _(s){var w;let A=((w=s.textContent)===null||w===void 0?void 0:w.trim())||\"\";return!(A.length<10||A.startsWith(\"http://\")||A.startsWith(\"https://\"))&&!i.test(A)&&!A.match(/^\\d+$/)&&!a.test(A)}function x(s,w){let A=s.tagName.toLowerCase();if(A===\"img\")return q(s,w);if(A===\"picture\"){let N=s.querySelector(\"img\");return N?q(N,w):s.cloneNode(!0)}return A===\"source\"?(function(N,I){let M=I.createElement(\"img\"),O=N.getAttribute(\"srcset\");O&&m(O,M);let L=N.parentElement;if(L){let j=L.querySelectorAll(\"img\"),W=[];for(let Y=0;Y<j.length;Y++){let z=j[Y],X=z.getAttribute(\"src\")||\"\";b(X)||h(X)||X===\"\"||W.push(z)}if(W.length>0){if(d(W[0],M,[\"src\",\"srcset\"]),!M.hasAttribute(\"src\")||!T(M.getAttribute(\"src\")||\"\")){let Y=W[0].getAttribute(\"src\");Y&&T(Y)&&M.setAttribute(\"src\",Y)}}else{let Y=L.querySelector(\"img[data-src]\");if(Y&&(d(Y,M,[\"src\",\"srcset\"]),!M.hasAttribute(\"src\")||!T(M.getAttribute(\"src\")||\"\"))){let z=Y.getAttribute(\"data-src\");z&&T(z)&&M.setAttribute(\"src\",z)}}}return M})(s,w):s.cloneNode(!0)}function q(s,w){let A=s.getAttribute(\"src\")||\"\";if(b(A)||h(A)){let N=s.parentElement;if(N){let I=N.querySelectorAll(\"source\"),M=[];for(let O=0;O<I.length;O++){let L=I[O];L.hasAttribute(\"data-srcset\")&&L.getAttribute(\"data-srcset\")!==\"\"&&M.push(L)}if(M.length>0){let O=w.createElement(\"img\"),L=s.getAttribute(\"data-src\");return L&&!h(L)&&O.setAttribute(\"src\",L),d(s,O,[\"src\"]),O}}}return s.cloneNode(!0)}function R(s){let w=s.split(\",\");if(w.length===0)return null;let A=w[0].trim().match(r);if(A&&A[1]){let N=A[1];if(h(N)){for(let I=1;I<w.length;I++){let M=w[I].trim().match(r);if(M&&M[1]&&!h(M[1]))return M[1]}return null}return N}return null}function B(s){if(s.length===0)return null;if(s.length===1)return s[0];for(let N=0;N<s.length;N++)if(!s[N].hasAttribute(\"media\"))return s[N];let w=null,A=0;for(let N=0;N<s.length;N++){let I=s[N],M=I.getAttribute(\"srcset\");if(!M)continue;let O=M.match(o),L=M.match(e);if(O&&O[1]){let j=parseInt(O[1],10)*(L?parseFloat(L[1]):1);j>A&&(A=j,w=I)}}return w||s[0]}g.imageRules=[{selector:\"picture\",element:\"picture\",transform:(s,w)=>{let A=s.querySelectorAll(\"source\"),N=s.querySelector(\"img\");if(!N){console.warn(\"Picture element without img fallback:\",s.outerHTML);let O=B(A);if(O){let L=O.getAttribute(\"srcset\");if(L){let j=w.createElement(\"img\");return m(L,j),s.innerHTML=\"\",s.appendChild(j),s}}return s}let I=null,M=null;if(A.length>0){let O=B(A);O&&(I=O.getAttribute(\"srcset\"),I&&(M=R(I)))}if(I&&N.setAttribute(\"srcset\",I),M&&T(M))N.setAttribute(\"src\",M);else if(!N.hasAttribute(\"src\")||!T(N.getAttribute(\"src\")||\"\")){let O=R(N.getAttribute(\"srcset\")||I||\"\");O&&T(O)&&N.setAttribute(\"src\",O)}return A.forEach((O=>O.remove())),s}},{selector:\"uni-image-full-width\",element:\"figure\",transform:(s,w)=>{var A;let N=w.createElement(\"figure\"),I=w.createElement(\"img\"),M=s.querySelector(\"img\");if(!M)return console.warn(\"uni-image-full-width without img:\",s.outerHTML),N;let O=M.getAttribute(\"src\"),L=M.getAttribute(\"data-loading\");if(L)try{let Y=JSON.parse(L);Y.desktop&&T(Y.desktop)&&(O=Y.desktop)}catch(Y){console.warn(\"Failed to parse data-loading attribute:\",L,Y)}if(!O||!T(O))return console.warn(\"Could not find valid src for uni-image-full-width:\",s.outerHTML),N;I.setAttribute(\"src\",O);let j=M.getAttribute(\"alt\");j||(j=s.getAttribute(\"alt-text\")),j&&I.setAttribute(\"alt\",j),N.appendChild(I);let W=s.querySelector(\"figcaption\");if(W){let Y=(A=W.textContent)===null||A===void 0?void 0:A.trim();if(Y&&Y.length>5){let z=w.createElement(\"figcaption\"),X=W.querySelector(\".rich-text p\");X?z.innerHTML=X.innerHTML:z.textContent=Y,N.appendChild(z)}}return N}},{selector:'img[data-src], img[data-srcset], img[loading=\"lazy\"], img.lazy, img.lazyload',element:\"img\",transform:(s,w)=>{let A=s.getAttribute(\"src\")||\"\",N=(function(O){if(O.hasAttribute(\"data-src\")||O.hasAttribute(\"data-srcset\"))return!0;for(let L=0;L<O.attributes.length;L++){let j=O.attributes[L];if(j.name!==\"src\"&&(j.name.startsWith(\"data-\")&&/\\.(jpg|jpeg|png|webp|gif)(\\?.*)?$/i.test(j.value)||/\\.(jpg|jpeg|png|webp|gif)(\\?.*)?$/i.test(j.value)))return!0}return!1})(s);b(A)&&N&&s.removeAttribute(\"src\");let I=s.getAttribute(\"data-src\");I&&!s.getAttribute(\"src\")&&s.setAttribute(\"src\",I);let M=s.getAttribute(\"data-srcset\");M&&!s.getAttribute(\"srcset\")&&s.setAttribute(\"srcset\",M);for(let O=0;O<s.attributes.length;O++){let L=s.attributes[O];L.name!==\"src\"&&L.name!==\"srcset\"&&L.name!==\"alt\"&&(S.test(L.value)?s.setAttribute(\"srcset\",L.value):t.test(L.value)&&s.setAttribute(\"src\",L.value))}return s.classList.remove(\"lazy\",\"lazyload\"),s.removeAttribute(\"data-ll-status\"),s.removeAttribute(\"data-src\"),s.removeAttribute(\"data-srcset\"),s.removeAttribute(\"loading\"),s}},{selector:\"span:has(img)\",element:\"span\",transform:(s,w)=>{try{if(!u(s))return s;let A=f(s);if(!A)return s;let N=C(s),I=x(A,w);if(N&&_(N)){let M=l(I,N,w);return N.parentNode&&N.parentNode.removeChild(N),M}return I}catch(A){return console.warn(\"Error processing span with image:\",A),s}}},{selector:'figure, p:has([class*=\"caption\"])',element:\"figure\",transform:(s,w)=>{try{if(!u(s))return s;let A=f(s);if(!A)return s;let N=C(s);if(N&&_(N)){let I=f(s),M;return I?M=I:(console.warn(\"Figure rule couldn't find current image element in:\",s.outerHTML),M=x(A,w)),l(M,N,w)}return s}catch(A){return console.warn(\"Error processing complex image element:\",A),s}}}]},732:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.GeminiExtractor=void 0;let y=p(181);class E extends y.ConversationExtractor{constructor(t,n){super(t,n),this.messageCount=null,this.conversationContainers=t.querySelectorAll(\"div.conversation-container\"),this.footnotes=[]}canExtract(){return!!this.conversationContainers&&this.conversationContainers.length>0}extractMessages(){this.messageCount=0;let t=[];return this.conversationContainers&&(this.extractSources(),this.conversationContainers.forEach((n=>{let o=n.querySelector(\"user-query\");if(o){let r=o.querySelector(\".query-text\");if(r){let i=r.innerHTML||\"\";t.push({author:\"You\",content:i.trim(),metadata:{role:\"user\"}})}}let e=n.querySelector(\"model-response\");if(e){let r=e.querySelector(\".model-response-text .markdown\"),i=e.querySelector(\"#extended-response-markdown-content\")||r;if(i){let a=i.innerHTML||\"\",l=document.createElement(\"div\");l.innerHTML=a,l.querySelectorAll(\".table-content\").forEach((m=>{m.classList.remove(\"table-content\")})),a=l.innerHTML,t.push({author:\"Gemini\",content:a.trim(),metadata:{role:\"assistant\"}})}}})),this.messageCount=t.length),t}extractSources(){let t=this.document.querySelectorAll(\"browse-item\");t&&t.length>0&&t.forEach((n=>{var o,e,r,i;let a=n.querySelector(\"a\");if(a instanceof HTMLAnchorElement){let l=a.href,m=((e=(o=a.querySelector(\".domain\"))===null||o===void 0?void 0:o.textContent)===null||e===void 0?void 0:e.trim())||\"\",d=((i=(r=a.querySelector(\".title\"))===null||r===void 0?void 0:r.textContent)===null||i===void 0?void 0:i.trim())||\"\";l&&(m||d)&&this.footnotes.push({url:l,text:d?`${m}: ${d}`:m})}}))}getFootnotes(){return this.footnotes}getMetadata(){var t;let n=this.getTitle(),o=(t=this.messageCount)!==null&&t!==void 0?t:this.extractMessages().length;return{title:n,site:\"Gemini\",url:this.url,messageCount:o,description:`Gemini conversation with ${o} messages`}}getTitle(){var t,n,o,e,r;let i=(t=this.document.title)===null||t===void 0?void 0:t.trim();if(i&&i!==\"Gemini\"&&!i.includes(\"Gemini\"))return i;let a=(o=(n=this.document.querySelector(\".title-text\"))===null||n===void 0?void 0:n.textContent)===null||o===void 0?void 0:o.trim();if(a)return a;let l=(r=(e=this.conversationContainers)===null||e===void 0?void 0:e.item(0))===null||r===void 0?void 0:r.querySelector(\".query-text\");if(l){let m=l.textContent||\"\";return m.length>50?m.slice(0,50)+\"...\":m}return\"Gemini Conversation\"}}g.GeminiExtractor=E},754:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.codeBlockRules=void 0;let y=p(552),E=[/^language-(\\w+)$/,/^lang-(\\w+)$/,/^(\\w+)-code$/,/^code-(\\w+)$/,/^syntax-(\\w+)$/,/^code-snippet__(\\w+)$/,/^highlight-(\\w+)$/,/^(\\w+)-snippet$/,/(?:^|\\s)(?:language|lang|brush|syntax)-(\\w+)(?:\\s|$)/i],S=new Set([\"abap\",\"actionscript\",\"ada\",\"adoc\",\"agda\",\"antlr4\",\"applescript\",\"arduino\",\"armasm\",\"asciidoc\",\"aspnet\",\"atom\",\"bash\",\"batch\",\"c\",\"clojure\",\"cmake\",\"cobol\",\"coffeescript\",\"cpp\",\"c++\",\"crystal\",\"csharp\",\"cs\",\"dart\",\"django\",\"dockerfile\",\"dotnet\",\"elixir\",\"elm\",\"erlang\",\"fortran\",\"fsharp\",\"gdscript\",\"gitignore\",\"glsl\",\"golang\",\"gradle\",\"graphql\",\"groovy\",\"haskell\",\"hs\",\"haxe\",\"hlsl\",\"html\",\"idris\",\"java\",\"javascript\",\"js\",\"jsx\",\"jsdoc\",\"json\",\"jsonp\",\"julia\",\"kotlin\",\"latex\",\"lisp\",\"elisp\",\"livescript\",\"lua\",\"makefile\",\"markdown\",\"md\",\"markup\",\"masm\",\"mathml\",\"matlab\",\"mongodb\",\"mysql\",\"nasm\",\"nginx\",\"nim\",\"nix\",\"objc\",\"ocaml\",\"pascal\",\"perl\",\"php\",\"postgresql\",\"powershell\",\"prolog\",\"puppet\",\"python\",\"regex\",\"rss\",\"ruby\",\"rb\",\"rust\",\"scala\",\"scheme\",\"shell\",\"sh\",\"solidity\",\"sparql\",\"sql\",\"ssml\",\"svg\",\"swift\",\"tcl\",\"terraform\",\"tex\",\"toml\",\"typescript\",\"ts\",\"tsx\",\"unrealscript\",\"verilog\",\"vhdl\",\"webassembly\",\"wasm\",\"xml\",\"yaml\",\"yml\",\"zig\"]);g.codeBlockRules=[{selector:[\"pre\",'div[class*=\"prismjs\"]',\".syntaxhighlighter\",\".highlight\",\".highlight-source\",\".wp-block-syntaxhighlighter-code\",\".wp-block-code\",'div[class*=\"language-\"]'].join(\", \"),element:\"pre\",transform:(t,n)=>{if(!(d=>\"classList\"in d&&\"getAttribute\"in d&&\"querySelector\"in d)(t))return t;let o=d=>{var b;let h=d.getAttribute(\"data-lang\")||d.getAttribute(\"data-language\");if(h)return h.toLowerCase();let T=Array.from(d.classList||[]);if(!((b=d.classList)===null||b===void 0)&&b.contains(\"syntaxhighlighter\")){let u=T.find((v=>![\"syntaxhighlighter\",\"nogutter\"].includes(v)));if(u&&S.has(u.toLowerCase()))return u.toLowerCase()}for(let u of T)for(let v of E){let f=u.toLowerCase().match(v);if(f&&f[1]&&S.has(f[1].toLowerCase()))return f[1].toLowerCase()}for(let u of T)if(S.has(u.toLowerCase()))return u.toLowerCase();return\"\"},e=\"\",r=t;for(;r&&!e;){e=o(r);let d=r.querySelector(\"code\");!e&&d&&(e=o(d)),r=r.parentElement}let i=d=>{var b;if((0,y.isTextNode)(d))return!((b=d.parentElement)===null||b===void 0)&&b.querySelector(\"[data-line]\")&&!(d.textContent||\"\").trim()?\"\":d.textContent||\"\";let h=\"\";if((0,y.isElement)(d)){if(d.tagName===\"BR\")return`\n`;if(d.matches('div[class*=\"line\"], span[class*=\"line\"], .ec-line, [data-line-number], [data-line]')){let T=d.querySelector('.code, .content, [class*=\"code-\"], [class*=\"content-\"]');if(T)return(T.textContent||\"\")+`\n`;let u=d.querySelector('.line-number, .gutter, [class*=\"line-number\"], [class*=\"gutter\"]');return u?Array.from(d.childNodes).filter((v=>!u.contains(v))).map((v=>i(v))).join(\"\")+`\n`:d.textContent+`\n`}d.childNodes.forEach((T=>{h+=i(T)}))}return h},a=\"\";t.matches(\".syntaxhighlighter, .wp-block-syntaxhighlighter-code\")&&(a=(d=>{let b=d.querySelector(\".syntaxhighlighter table .code .container\");if(b)return Array.from(b.children).map((T=>Array.from(T.querySelectorAll(\"code\")).map((v=>{var f;let C=v.textContent||\"\";return!((f=v.classList)===null||f===void 0)&&f.contains(\"spaces\")&&(C=\" \".repeat(C.length)),C})).join(\"\")||T.textContent||\"\")).join(`\n`);let h=d.querySelectorAll(\".code .line\");return h.length>0?Array.from(h).map((T=>Array.from(T.querySelectorAll(\"code\")).map((v=>v.textContent||\"\")).join(\"\")||T.textContent||\"\")).join(`\n`):\"\"})(t)),a||(a=i(t)),a=a.replace(/^\\s+|\\s+$/g,\"\").replace(/\\t/g,\"    \").replace(/\\n{3,}/g,`\n\n`).replace(/\\u00a0/g,\" \").replace(/^\\n+/,\"\").replace(/\\n+$/,\"\");let l=n.createElement(\"pre\"),m=n.createElement(\"code\");return e&&(m.setAttribute(\"data-lang\",e),m.setAttribute(\"class\",`language-${e}`)),m.textContent=a,l.appendChild(m),l}}]},840:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.standardizeContent=function(d,b,h,T=!1){(function(u){let v=f=>{if((0,e.isElement)(f)){let C=f.tagName.toLowerCase();if(C===\"pre\"||C===\"code\")return}if((0,e.isTextNode)(f)){let C=f.textContent||\"\",_=C.replace(/\\xA0+/g,(x=>{var q,R,B,s;if(x.length===1){let w=(R=(q=f.previousSibling)===null||q===void 0?void 0:q.textContent)===null||R===void 0?void 0:R.slice(-1),A=(s=(B=f.nextSibling)===null||B===void 0?void 0:B.textContent)===null||s===void 0?void 0:s.charAt(0);if(w!=null&&w.match(/\\w/)&&(A!=null&&A.match(/\\w/)))return\"\\xA0\"}return\" \".repeat(x.length)}));_!==C&&(f.textContent=_)}f.hasChildNodes()&&Array.from(f.childNodes).forEach(v)};v(u)})(d),(function(u){let v=0;Array.from(u.getElementsByTagName(\"*\")).forEach((f=>{Array.from(f.childNodes).forEach((C=>{(0,e.isCommentNode)(C)&&(C.remove(),v++)}))})),(0,e.logDebug)(\"Removed HTML comments:\",v)})(d),(function(u,v,f){let C=q=>q.replace(/\\u00A0/g,\" \").replace(/\\s+/g,\" \").trim().toLowerCase(),_=u.getElementsByTagName(\"h1\");Array.from(_).forEach((q=>{var R;let B=f.createElement(\"h2\");B.innerHTML=q.innerHTML,Array.from(q.attributes).forEach((s=>{y.ALLOWED_ATTRIBUTES.has(s.name)&&B.setAttribute(s.name,s.value)})),(R=q.parentNode)===null||R===void 0||R.replaceChild(B,q)}));let x=u.getElementsByTagName(\"h2\");if(x.length>0){let q=x[0],R=C(q.textContent||\"\"),B=C(v);B&&B===R&&q.remove()}})(d,b.title,h),(0,t.standardizeFootnotes)(d),(function(u,v){let f=0;r.forEach((C=>{u.querySelectorAll(C.selector).forEach((_=>{if(C.transform){let x=C.transform(_,v);_.replaceWith(x),f++}}))})),u.querySelectorAll(\"lite-youtube\").forEach((C=>{let _=C.getAttribute(\"videoid\");if(!_)return;let x=v.createElement(\"iframe\");x.width=\"560\",x.height=\"315\",x.src=`https://www.youtube.com/embed/${_}`,x.title=C.getAttribute(\"videotitle\")||\"YouTube video player\",x.frameBorder=\"0\",x.allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",x.setAttribute(\"allowfullscreen\",\"\"),C.replaceWith(x),f++})),(0,e.logDebug)(\"Converted embedded elements:\",f)})(d,h),T?(a(d,T),i(d),l(d),(0,e.logDebug)(\"Debug mode: Skipping div flattening to preserve structure\")):(m(d,h),a(d,T),(function(u){let v=0,f=0,C=!0;for(;C;){f++,C=!1;let _=Array.from(u.getElementsByTagName(\"*\")).filter((x=>{if(y.ALLOWED_EMPTY_ELEMENTS.has(x.tagName.toLowerCase()))return!1;let q=x.textContent||\"\",R=q.trim().length===0,B=q.includes(\"\\xA0\"),s=!x.hasChildNodes()||Array.from(x.childNodes).every((w=>{if((0,e.isTextNode)(w)){let A=w.textContent||\"\";return A.trim().length===0&&!A.includes(\"\\xA0\")}return!1}));if(x.tagName.toLowerCase()===\"div\"){let w=Array.from(x.children);if(w.length>0&&w.every((A=>{var N;if(A.tagName.toLowerCase()!==\"span\")return!1;let I=((N=A.textContent)===null||N===void 0?void 0:N.trim())||\"\";return I===\",\"||I===\"\"||I===\" \"})))return!0}return R&&!B&&s}));_.length>0&&(_.forEach((x=>{x.remove(),v++})),C=!0)}(0,e.logDebug)(\"Removed empty elements:\",v,\"iterations:\",f)})(d),i(d),m(d,h),l(d),(function(u,v){let f=0,C=Date.now(),_=R=>{var B;if((0,e.isElement)(R)){let s=R.tagName.toLowerCase();if(s===\"pre\"||s===\"code\")return}if(Array.from(R.childNodes).forEach(_),(0,e.isTextNode)(R)){let s=R.textContent||\"\";if(!s||s.match(/^[\\u200C\\u200B\\u200D\\u200E\\u200F\\uFEFF\\xA0\\s]*$/))(B=R.parentNode)===null||B===void 0||B.removeChild(R),f++;else{let w=s.replace(/\\n{3,}/g,`\n\n`).replace(/^[\\n\\r\\t]+/,\"\").replace(/[\\n\\r\\t]+$/,\"\").replace(/[ \\t]*\\n[ \\t]*/g,`\n`).replace(/[ \\t]{3,}/g,\" \").replace(/^[ ]+$/,\" \").replace(/\\s+([,.!?:;])/g,\"$1\").replace(/[\\u200B\\u200D\\u200E\\u200F\\uFEFF]+/g,\"\").replace(/(?:\\xA0){2,}/g,\"\\xA0\");w!==s&&(R.textContent=w,f+=s.length-w.length)}}},x=R=>{var B;if(!(0,e.isElement)(R))return;let s=R.tagName.toLowerCase();if(s===\"pre\"||s===\"code\")return;Array.from(R.childNodes).filter(e.isElement).forEach(x),R.normalize();let w=((B=(0,e.getComputedStyle)(R))===null||B===void 0?void 0:B.display)===\"block\",A=w?/^[\\n\\r\\t \\u200C\\u200B\\u200D\\u200E\\u200F\\uFEFF\\xA0]*$/:/^[\\n\\r\\t\\u200C\\u200B\\u200D\\u200E\\u200F\\uFEFF]*$/,N=w?/^[\\n\\r\\t \\u200C\\u200B\\u200D\\u200E\\u200F\\uFEFF\\xA0]*$/:/^[\\n\\r\\t\\u200C\\u200B\\u200D\\u200E\\u200F\\uFEFF]*$/;for(;R.firstChild&&(0,e.isTextNode)(R.firstChild)&&(R.firstChild.textContent||\"\").match(A);)R.removeChild(R.firstChild),f++;for(;R.lastChild&&(0,e.isTextNode)(R.lastChild)&&(R.lastChild.textContent||\"\").match(N);)R.removeChild(R.lastChild),f++;if(!w){let I=Array.from(R.childNodes);for(let M=0;M<I.length-1;M++){let O=I[M],L=I[M+1];if((0,e.isElement)(O)||(0,e.isElement)(L)){let j=L.textContent||\"\",W=O.textContent||\"\",Y=j.match(/^[,.!?:;)\\]]/),z=W.match(/[,.!?:;(\\[]\\s*$/),X=(0,e.isTextNode)(O)&&(O.textContent||\"\").endsWith(\" \")||(0,e.isTextNode)(L)&&(L.textContent||\"\").startsWith(\" \");if(!Y&&!z&&!X){let J=v.createTextNode(\" \");R.insertBefore(J,L)}}}}};_(u),x(u);let q=Date.now();(0,e.logDebug)(\"Removed empty lines:\",{charactersRemoved:f,processingTime:`${(q-C).toFixed(2)}ms`})})(d,h))};let y=p(640),E=p(0),S=p(754),t=p(610),n=p(864),o=p(649),e=p(552),r=[...E.mathRules,...S.codeBlockRules,...n.headingRules,...o.imageRules,{selector:'div[data-testid^=\"paragraph\"], div[role=\"paragraph\"]',element:\"p\",transform:(d,b)=>{let h=b.createElement(\"p\");return h.innerHTML=d.innerHTML,Array.from(d.attributes).forEach((T=>{y.ALLOWED_ATTRIBUTES.has(T.name)&&h.setAttribute(T.name,T.value)})),h}},{selector:'div[role=\"list\"]',element:\"ul\",transform:(d,b)=>{var h;let T=d.querySelector('div[role=\"listitem\"] .label'),u=(((h=T==null?void 0:T.textContent)===null||h===void 0?void 0:h.trim())||\"\").match(/^\\d+\\)/),v=b.createElement(u?\"ol\":\"ul\");return d.querySelectorAll('div[role=\"listitem\"]').forEach((f=>{let C=b.createElement(\"li\"),_=f.querySelector(\".content\");_&&(_.querySelectorAll('div[role=\"paragraph\"]').forEach((x=>{let q=b.createElement(\"p\");q.innerHTML=x.innerHTML,x.replaceWith(q)})),_.querySelectorAll('div[role=\"list\"]').forEach((x=>{var q;let R=x.querySelector('div[role=\"listitem\"] .label'),B=(((q=R==null?void 0:R.textContent)===null||q===void 0?void 0:q.trim())||\"\").match(/^\\d+\\)/),s=b.createElement(B?\"ol\":\"ul\");x.querySelectorAll('div[role=\"listitem\"]').forEach((w=>{let A=b.createElement(\"li\"),N=w.querySelector(\".content\");N&&(N.querySelectorAll('div[role=\"paragraph\"]').forEach((I=>{let M=b.createElement(\"p\");M.innerHTML=I.innerHTML,I.replaceWith(M)})),A.innerHTML=N.innerHTML),s.appendChild(A)})),x.replaceWith(s)})),C.innerHTML=_.innerHTML),v.appendChild(C)})),v}},{selector:'div[role=\"listitem\"]',element:\"li\",transform:(d,b)=>{let h=d.querySelector(\".content\");return h?(h.querySelectorAll('div[role=\"paragraph\"]').forEach((T=>{let u=b.createElement(\"p\");u.innerHTML=T.innerHTML,T.replaceWith(u)})),h):d}}];function i(d){let b=0,h=T=>{let u=\"\",v=T.nextSibling;for(;v;)((0,e.isTextNode)(v)||(0,e.isElement)(v))&&(u+=v.textContent||\"\"),v=v.nextSibling;if(u.trim())return!0;let f=T.parentElement;return!(!f||f===d)&&h(f)};Array.from(d.querySelectorAll(\"h1, h2, h3, h4, h5, h6\")).reverse().forEach((T=>{h(T)||(T.remove(),b++)})),b>0&&(0,e.logDebug)(\"Removed trailing headings:\",b)}function a(d,b){let h=0,T=u=>{if(u.tagName.toLowerCase()===\"svg\"||u.namespaceURI===\"http://www.w3.org/2000/svg\")return;let v=Array.from(u.attributes),f=u.tagName.toLowerCase();v.forEach((C=>{let _=C.name.toLowerCase(),x=C.value;_===\"id\"&&(x.startsWith(\"fnref:\")||x.startsWith(\"fn:\")||x===\"footnotes\")||_===\"class\"&&(f===\"code\"&&x.startsWith(\"language-\")||x===\"footnote-backref\")||(b?y.ALLOWED_ATTRIBUTES.has(_)||y.ALLOWED_ATTRIBUTES_DEBUG.has(_)||_.startsWith(\"data-\")||(u.removeAttribute(C.name),h++):y.ALLOWED_ATTRIBUTES.has(_)||(u.removeAttribute(C.name),h++))}))};T(d),d.querySelectorAll(\"*\").forEach(T),(0,e.logDebug)(\"Stripped attributes:\",h)}function l(d){let b=0,h=Date.now(),T=Array.from(d.getElementsByTagName(\"br\")),u=[],v=()=>{if(u.length>2)for(let C=2;C<u.length;C++)u[C].remove(),b++;u=[]};T.forEach((C=>{var _;let x=!1;if(u.length>0){let q=u[u.length-1],R=C.previousSibling;for(;R&&(0,e.isTextNode)(R)&&!(!((_=R.textContent)===null||_===void 0)&&_.trim());)R=R.previousSibling;R===q&&(x=!0)}x?u.push(C):(v(),u=[C])})),v();let f=Date.now();(0,e.logDebug)(\"Standardized br elements:\",{removed:b,processingTime:`${(f-h).toFixed(2)}ms`})}function m(d,b){let h=0,T=Date.now(),u=!0;function v(s){var w;for(let A of s.childNodes)if((0,e.isTextNode)(A)&&(!((w=A.textContent)===null||w===void 0)&&w.trim())||(0,e.isElement)(A)&&y.INLINE_ELEMENTS.has(A.nodeName.toLowerCase()))return!0;return!1}let f=s=>{let w=s.tagName.toLowerCase();if(y.PRESERVE_ELEMENTS.has(w))return!0;let A=s.getAttribute(\"role\");if(A&&[\"article\",\"main\",\"navigation\",\"banner\",\"contentinfo\"].includes(A))return!0;let N=s.className;return typeof N==\"string\"&&N.toLowerCase().match(/(?:article|main|content|footnote|reference|bibliography)/)?!0:!!Array.from(s.children).some((I=>y.PRESERVE_ELEMENTS.has(I.tagName.toLowerCase())||I.getAttribute(\"role\")===\"article\"||I.className&&typeof I.className==\"string\"&&I.className.toLowerCase().match(/(?:article|main|content|footnote|reference|bibliography)/)))},C=s=>{var w;if(v(s))return!1;if(!(!((w=s.textContent)===null||w===void 0)&&w.trim()))return!0;let A=Array.from(s.children);if(A.length===0||A.every((M=>{let O=M.tagName.toLowerCase();return y.BLOCK_ELEMENTS.includes(O)||O===\"p\"||O===\"h1\"||O===\"h2\"||O===\"h3\"||O===\"h4\"||O===\"h5\"||O===\"h6\"||O===\"ul\"||O===\"ol\"||O===\"pre\"||O===\"blockquote\"||O===\"figure\"})))return!0;let N=s.className.toLowerCase();return/(?:wrapper|container|layout|row|col|grid|flex|outer|inner|content-area)/i.test(N)||Array.from(s.childNodes).filter((M=>{var O;return(0,e.isTextNode)(M)&&((O=M.textContent)===null||O===void 0?void 0:O.trim())})).length===0?!0:!(!(A.length>0)||A.some((M=>{let O=M.tagName.toLowerCase();return y.INLINE_ELEMENTS.has(O)})))},_=s=>{var w,A;if(!s.isConnected||f(s))return!1;let N=s.tagName.toLowerCase();if(!y.ALLOWED_EMPTY_ELEMENTS.has(N)&&!s.children.length&&!(!((w=s.textContent)===null||w===void 0)&&w.trim()))return s.remove(),h++,!0;if(s.parentElement===d){let L=Array.from(s.children);if(L.length>0&&!L.some((j=>{let W=j.tagName.toLowerCase();return y.INLINE_ELEMENTS.has(W)}))){let j=b.createDocumentFragment();for(;s.firstChild;)j.appendChild(s.firstChild);return s.replaceWith(j),h++,!0}}if(C(s)){if(!Array.from(s.children).some((j=>{let W=j.tagName.toLowerCase();return y.INLINE_ELEMENTS.has(W)}))){let j=b.createDocumentFragment();for(;s.firstChild;)j.appendChild(s.firstChild);return s.replaceWith(j),h++,!0}let L=b.createDocumentFragment();for(;s.firstChild;)L.appendChild(s.firstChild);return s.replaceWith(L),h++,!0}let I=Array.from(s.childNodes);if(I.length>0&&I.every((L=>(0,e.isTextNode)(L)||(0,e.isElement)(L)&&y.INLINE_ELEMENTS.has(L.nodeName.toLowerCase())))&&(!((A=s.textContent)===null||A===void 0)&&A.trim())){let L=b.createElement(\"p\");for(;s.firstChild;)L.appendChild(s.firstChild);return s.replaceWith(L),h++,!0}if(s.children.length===1){let L=s.firstElementChild,j=L.tagName.toLowerCase();if(y.BLOCK_ELEMENTS.includes(j)&&!f(L))return s.replaceWith(L),h++,!0}let M=0,O=s.parentElement;for(;O;){let L=O.tagName.toLowerCase();y.BLOCK_ELEMENTS.includes(L)&&M++,O=O.parentElement}if(M>0&&!v(s)){let L=b.createDocumentFragment();for(;s.firstChild;)L.appendChild(s.firstChild);return s.replaceWith(L),h++,!0}return!1},x=()=>{let s=Array.from(d.children).filter((A=>y.BLOCK_ELEMENTS.includes(A.tagName.toLowerCase()))),w=!1;return s.forEach((A=>{_(A)&&(w=!0)})),w},q=()=>{let s=Array.from(d.querySelectorAll(y.BLOCK_ELEMENTS.join(\",\"))).sort(((A,N)=>{let I=M=>{let O=0,L=M.parentElement;for(;L;){let j=L.tagName.toLowerCase();y.BLOCK_ELEMENTS.includes(j)&&O++,L=L.parentElement}return O};return I(N)-I(A)})),w=!1;return s.forEach((A=>{_(A)&&(w=!0)})),w},R=()=>{let s=Array.from(d.querySelectorAll(y.BLOCK_ELEMENTS.join(\",\"))),w=!1;return s.forEach((A=>{let N=Array.from(A.children);if(N.length>0&&N.every((I=>I.tagName.toLowerCase()===\"p\"))||!f(A)&&C(A)){let I=b.createDocumentFragment();for(;A.firstChild;)I.appendChild(A.firstChild);A.replaceWith(I),h++,w=!0}})),w};do u=!1,x()&&(u=!0),q()&&(u=!0),R()&&(u=!0);while(u);let B=Date.now();(0,e.logDebug)(\"Flattened wrapper elements:\",{count:h,processingTime:`${(B-T).toFixed(2)}ms`})}},864:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.headingRules=void 0;let y=p(640);g.headingRules=[{selector:\"h1, h2, h3, h4, h5, h6\",element:\"keep\",transform:E=>{var S;let t=E.ownerDocument;if(!t)return console.warn(\"No document available\"),E;let n=t.createElement(E.tagName);Array.from(E.attributes).forEach((i=>{y.ALLOWED_ATTRIBUTES.has(i.name)&&n.setAttribute(i.name,i.value)}));let o=E.cloneNode(!0),e=new Map;Array.from(o.querySelectorAll(\"*\")).forEach((i=>{var a,l,m,d,b,h;let T=!1;if(i.tagName.toLowerCase()===\"a\"){let u=i.getAttribute(\"href\");(u!=null&&u.includes(\"#\")||u!=null&&u.startsWith(\"#\"))&&(e.set(i,((a=i.textContent)===null||a===void 0?void 0:a.trim())||\"\"),T=!0)}if(i.classList.contains(\"anchor\")&&(e.set(i,((l=i.textContent)===null||l===void 0?void 0:l.trim())||\"\"),T=!0),i.tagName.toLowerCase()===\"button\"&&(T=!0),(i.tagName.toLowerCase()===\"span\"||i.tagName.toLowerCase()===\"div\")&&i.querySelector('a[href^=\"#\"]')){let u=i.querySelector('a[href^=\"#\"]');u&&e.set(i,((m=u.textContent)===null||m===void 0?void 0:m.trim())||\"\"),T=!0}if(T){let u=i.parentElement;u&&u!==o&&((d=u.textContent)===null||d===void 0?void 0:d.trim())===((b=i.textContent)===null||b===void 0?void 0:b.trim())&&e.set(u,((h=i.textContent)===null||h===void 0?void 0:h.trim())||\"\")}})),Array.from(o.querySelectorAll(\"*\")).filter((i=>{if(i.tagName.toLowerCase()===\"a\"){let a=i.getAttribute(\"href\");return(a==null?void 0:a.includes(\"#\"))||(a==null?void 0:a.startsWith(\"#\"))}return!!i.classList.contains(\"anchor\")||i.tagName.toLowerCase()===\"button\"||!(i.tagName.toLowerCase()!==\"span\"&&i.tagName.toLowerCase()!==\"div\"||!i.querySelector('a[href^=\"#\"]'))})).forEach((i=>i.remove()));let r=((S=o.textContent)===null||S===void 0?void 0:S.trim())||\"\";return!r&&e.size>0&&(r=Array.from(e.values())[0]),n.textContent=r,n}}]},917:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ExtractorRegistry=void 0;let y=p(959),E=p(248),S=p(64),t=p(258),n=p(458),o=p(632),e=p(397),r=p(20),i=p(732),a=p(588);class l{static initialize(){this.register({patterns:[\"x.com\",\"twitter.com\"],extractor:S.XArticleExtractor}),this.register({patterns:[\"twitter.com\",/\\/x\\.com\\/.*/],extractor:E.TwitterExtractor}),this.register({patterns:[\"reddit.com\",\"old.reddit.com\",\"new.reddit.com\",/^https:\\/\\/[^\\/]+\\.reddit\\.com/],extractor:y.RedditExtractor}),this.register({patterns:[\"youtube.com\",\"youtu.be\",/youtube\\.com\\/watch\\?v=.*/,/youtu\\.be\\/.*/],extractor:t.YoutubeExtractor}),this.register({patterns:[/news\\.ycombinator\\.com\\/item\\?id=.*/],extractor:n.HackerNewsExtractor}),this.register({patterns:[/^https?:\\/\\/chatgpt\\.com\\/(c|share)\\/.*/],extractor:o.ChatGPTExtractor}),this.register({patterns:[\"claude.ai\",/^https?:\\/\\/claude\\.ai\\/(chat|share)\\/.*/],extractor:e.ClaudeExtractor}),this.register({patterns:[/^https?:\\/\\/grok\\.com\\/(chat|share)(\\/.*)?$/],extractor:r.GrokExtractor}),this.register({patterns:[/^https?:\\/\\/gemini\\.google\\.com\\/app\\/.*/],extractor:i.GeminiExtractor}),this.register({patterns:[\"github.com\",/^https?:\\/\\/github\\.com\\/.*/],extractor:a.GitHubExtractor})}static register(d){this.mappings.push(d)}static findExtractor(d,b,h){try{let T=new URL(b).hostname;for(let{patterns:u,extractor:v}of this.mappings)if(u.some((f=>f instanceof RegExp?f.test(b):T.includes(f)))){let f=new v(d,b,h);if(f.canExtract())return f}return null}catch(T){return console.error(\"Error in findExtractor:\",T),null}}}g.ExtractorRegistry=l,l.mappings=[],l.initialize()},959:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.RedditExtractor=void 0;let y=p(279);class E extends y.BaseExtractor{constructor(t,n){super(t,n),this.shredditPost=t.querySelector(\"shreddit-post\")}canExtract(){return!!this.shredditPost}extract(){var t,n;let o=this.getPostContent(),e=this.extractComments(),r=this.createContentHtml(o,e),i=((n=(t=this.document.querySelector(\"h1\"))===null||t===void 0?void 0:t.textContent)===null||n===void 0?void 0:n.trim())||\"\",a=this.getSubreddit(),l=this.getPostAuthor(),m=this.createDescription(o);return{content:r,contentHtml:r,extractedContent:{postId:this.getPostId(),subreddit:a,postAuthor:l},variables:{title:i,author:l,site:`r/${a}`,description:m}}}getPostContent(){var t,n,o,e;return(((n=(t=this.shredditPost)===null||t===void 0?void 0:t.querySelector('[slot=\"text-body\"]'))===null||n===void 0?void 0:n.innerHTML)||\"\")+(((e=(o=this.shredditPost)===null||o===void 0?void 0:o.querySelector(\"#post-image\"))===null||e===void 0?void 0:e.outerHTML)||\"\")}createContentHtml(t,n){return`\n\t\t\t<div class=\"reddit-post\">\n\t\t\t\t<div class=\"post-content\">\n\t\t\t\t\t${t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t${n?`\n\t\t\t\t<hr>\n\t\t\t\t<h2>Comments</h2>\n\t\t\t\t<div class=\"reddit-comments\">\n\t\t\t\t\t${n}\n\t\t\t\t</div>\n\t\t\t`:\"\"}\n\t\t`.trim()}extractComments(){let t=Array.from(this.document.querySelectorAll(\"shreddit-comment\"));return this.processComments(t)}getPostId(){let t=this.url.match(/comments\\/([a-zA-Z0-9]+)/);return(t==null?void 0:t[1])||\"\"}getSubreddit(){let t=this.url.match(/\\/r\\/([^/]+)/);return(t==null?void 0:t[1])||\"\"}getPostAuthor(){var t;return((t=this.shredditPost)===null||t===void 0?void 0:t.getAttribute(\"author\"))||\"\"}createDescription(t){var n;if(!t)return\"\";let o=document.createElement(\"div\");return o.innerHTML=t,((n=o.textContent)===null||n===void 0?void 0:n.trim().slice(0,140).replace(/\\s+/g,\" \"))||\"\"}processComments(t){var n;let o=\"\",e=-1,r=[];for(let i of t){let a=parseInt(i.getAttribute(\"depth\")||\"0\"),l=i.getAttribute(\"author\")||\"\",m=i.getAttribute(\"score\")||\"0\",d=i.getAttribute(\"permalink\")||\"\",b=((n=i.querySelector('[slot=\"comment\"]'))===null||n===void 0?void 0:n.innerHTML)||\"\",h=i.querySelector(\"faceplate-timeago\"),T=(h==null?void 0:h.getAttribute(\"ts\"))||\"\",u=T?new Date(T).toISOString().split(\"T\")[0]:\"\";if(a===0){for(;r.length>0;)o+=\"</blockquote>\",r.pop();o+=\"<blockquote>\",r=[0],e=0}else if(a<e)for(;r.length>0&&r[r.length-1]>=a;)o+=\"</blockquote>\",r.pop();else a>e&&(o+=\"<blockquote>\",r.push(a));o+=`<div class=\"comment\">\n\t<div class=\"comment-metadata\">\n\t\t<span class=\"comment-author\"><strong>${l}</strong></span> \\u2022\n\t\t<a href=\"https://reddit.com${d}\" class=\"comment-link\">${m} points</a> \\u2022\n\t\t<span class=\"comment-date\">${u}</span>\n\t</div>\n\t<div class=\"comment-content\">${b}</div>\n</div>`,e=a}for(;r.length>0;)o+=\"</blockquote>\",r.pop();return o}}g.RedditExtractor=E},968:(P,g,p)=>{Object.defineProperty(g,\"__esModule\",{value:!0}),g.ContentScorer=void 0;let y=p(640),E=[\"admonition\",\"article\",\"content\",\"entry\",\"image\",\"img\",\"font\",\"figure\",\"figcaption\",\"pre\",\"main\",\"post\",\"story\",\"table\"],S=[\"advertisement\",\"all rights reserved\",\"banner\",\"cookie\",\"comments\",\"copyright\",\"follow me\",\"follow us\",\"footer\",\"header\",\"homepage\",\"login\",\"menu\",\"more articles\",\"more like this\",\"most read\",\"nav\",\"navigation\",\"newsletter\",\"newsletter\",\"popular\",\"privacy\",\"recommended\",\"register\",\"related\",\"responses\",\"share\",\"sidebar\",\"sign in\",\"sign up\",\"signup\",\"social\",\"sponsored\",\"subscribe\",\"subscribe\",\"terms\",\"trending\"],t=[\"ad\",\"banner\",\"cookie\",\"copyright\",\"footer\",\"header\",\"homepage\",\"menu\",\"nav\",\"newsletter\",\"popular\",\"privacy\",\"recommended\",\"related\",\"rights\",\"share\",\"sidebar\",\"social\",\"sponsored\",\"subscribe\",\"terms\",\"trending\",\"widget\"];class n{constructor(e,r=!1){this.doc=e,this.debug=r}static scoreElement(e){let r=0,i=e.textContent||\"\",a=i.split(/\\s+/).length;r+=a,r+=10*e.getElementsByTagName(\"p\").length,r-=5*(e.getElementsByTagName(\"a\").length/(a||1)),r-=3*(e.getElementsByTagName(\"img\").length/(a||1));try{let m=e.getAttribute(\"style\")||\"\",d=e.getAttribute(\"align\")||\"\";(m.includes(\"float: right\")||m.includes(\"text-align: right\")||d===\"right\")&&(r+=5)}catch{}/\\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\\s+\\d{1,2},?\\s+\\d{4}\\b/i.test(i)&&(r+=10),/\\b(?:by|written by|author:)\\s+[A-Za-z\\s]+\\b/i.test(i)&&(r+=10);let l=e.className.toLowerCase();if((l.includes(\"content\")||l.includes(\"article\")||l.includes(\"post\"))&&(r+=15),e.querySelector(y.FOOTNOTE_INLINE_REFERENCES)&&(r+=10),e.querySelector(y.FOOTNOTE_LIST_SELECTORS)&&(r+=10),r-=5*e.getElementsByTagName(\"table\").length,e.tagName.toLowerCase()===\"td\"){let m=e.closest(\"table\");if(m){let d=parseInt(m.getAttribute(\"width\")||\"0\"),b=m.getAttribute(\"align\")||\"\",h=m.className.toLowerCase();if(d>400||b===\"center\"||h.includes(\"content\")||h.includes(\"article\")){let T=Array.from(m.getElementsByTagName(\"td\")),u=T.indexOf(e);u>0&&u<T.length-1&&(r+=10)}}}return r}static findBestElement(e,r=50){let i=null,a=0;return e.forEach((l=>{let m=this.scoreElement(l);m>a&&(a=m,i=l)})),a>r?i:null}static scoreAndRemove(e,r=!1){let i=Date.now(),a=0,l=new Set;Array.from(e.querySelectorAll(y.BLOCK_ELEMENTS.join(\",\"))).forEach((d=>{l.has(d)||n.isLikelyContent(d)||n.scoreNonContentBlock(d)<0&&(l.add(d),a++)})),l.forEach((d=>d.remove()));let m=Date.now();r&&console.log(\"Defuddle\",\"Removed non-content blocks:\",{count:a,processingTime:`${(m-i).toFixed(2)}ms`})}static isLikelyContent(e){let r=e.getAttribute(\"role\");if(r&&[\"article\",\"main\",\"contentinfo\"].includes(r))return!0;let i=e.className.toLowerCase(),a=e.id.toLowerCase();for(let d of E)if(i.includes(d)||a.includes(d))return!0;let l=(e.textContent||\"\").split(/\\s+/).length,m=e.getElementsByTagName(\"p\").length;return l>50&&m>1||l>100||l>30&&m>0}static scoreNonContentBlock(e){if(e.querySelector(y.FOOTNOTE_LIST_SELECTORS))return 0;let r=0,i=e.textContent||\"\",a=i.split(/\\s+/).length;if(a<3)return 0;for(let h of S)i.toLowerCase().includes(h)&&(r-=10);let l=e.getElementsByTagName(\"a\").length;l/(a||1)>.5&&(r-=15);let m=e.getElementsByTagName(\"ul\").length+e.getElementsByTagName(\"ol\").length;m>0&&l>3*m&&(r-=10);let d=e.className.toLowerCase(),b=e.id.toLowerCase();for(let h of t)(d.includes(h)||b.includes(h))&&(r-=8);return r}}g.ContentScorer=n}},k={};function G(P){var g=k[P];if(g!==void 0)return g.exports;var p=k[P]={exports:{}};return $[P](p,p.exports,G),p.exports}var U={};return(()=>{var P=U;let g=G(628);P.default=g.Defuddle})(),U=U.default})()))});var Be=nr(_e());var{entries:qe,setPrototypeOf:Le,isFrozen:or,getPrototypeOf:ir,getOwnPropertyDescriptor:ar}=Object,{freeze:ot,seal:st,create:ae}=Object,{apply:se,construct:le}=typeof Reflect<\"u\"&&Reflect;ot||(ot=function(k){return k});st||(st=function(k){return k});se||(se=function(k,G){for(var U=arguments.length,P=new Array(U>2?U-2:0),g=2;g<U;g++)P[g-2]=arguments[g];return k.apply(G,P)});le||(le=function(k){for(var G=arguments.length,U=new Array(G>1?G-1:0),P=1;P<G;P++)U[P-1]=arguments[P];return new k(...U)});var Ht=it(Array.prototype.forEach),sr=it(Array.prototype.lastIndexOf),Ne=it(Array.prototype.pop),Lt=it(Array.prototype.push),lr=it(Array.prototype.splice),Ut=it(String.prototype.toLowerCase),te=it(String.prototype.toString),ee=it(String.prototype.match),Nt=it(String.prototype.replace),cr=it(String.prototype.indexOf),ur=it(String.prototype.trim),lt=it(Object.prototype.hasOwnProperty),nt=it(RegExp.prototype.test),Mt=dr(TypeError);function it($){return function(k){k instanceof RegExp&&(k.lastIndex=0);for(var G=arguments.length,U=new Array(G>1?G-1:0),P=1;P<G;P++)U[P-1]=arguments[P];return se($,k,U)}}function dr($){return function(){for(var k=arguments.length,G=new Array(k),U=0;U<k;U++)G[U]=arguments[U];return le($,G)}}function V($,k){let G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ut;Le&&Le($,null);let U=k.length;for(;U--;){let P=k[U];if(typeof P==\"string\"){let g=G(P);g!==P&&(or(k)||(k[U]=g),P=g)}$[P]=!0}return $}function mr($){for(let k=0;k<$.length;k++)lt($,k)||($[k]=null);return $}function dt($){let k=ae(null);for(let[G,U]of qe($))lt($,G)&&(Array.isArray(U)?k[G]=mr(U):U&&typeof U==\"object\"&&U.constructor===Object?k[G]=dt(U):k[G]=U);return k}function Ot($,k){for(;$!==null;){let U=ar($,k);if(U){if(U.get)return it(U.get);if(typeof U.value==\"function\")return it(U.value)}$=ir($)}function G(){return null}return G}var Me=ot([\"a\",\"abbr\",\"acronym\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"bdi\",\"bdo\",\"big\",\"blink\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"center\",\"cite\",\"code\",\"col\",\"colgroup\",\"content\",\"data\",\"datalist\",\"dd\",\"decorator\",\"del\",\"details\",\"dfn\",\"dialog\",\"dir\",\"div\",\"dl\",\"dt\",\"element\",\"em\",\"fieldset\",\"figcaption\",\"figure\",\"font\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"img\",\"input\",\"ins\",\"kbd\",\"label\",\"legend\",\"li\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meter\",\"nav\",\"nobr\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"search\",\"section\",\"select\",\"shadow\",\"slot\",\"small\",\"source\",\"spacer\",\"span\",\"strike\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"template\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"tr\",\"track\",\"tt\",\"u\",\"ul\",\"var\",\"video\",\"wbr\"]),re=ot([\"svg\",\"a\",\"altglyph\",\"altglyphdef\",\"altglyphitem\",\"animatecolor\",\"animatemotion\",\"animatetransform\",\"circle\",\"clippath\",\"defs\",\"desc\",\"ellipse\",\"enterkeyhint\",\"exportparts\",\"filter\",\"font\",\"g\",\"glyph\",\"glyphref\",\"hkern\",\"image\",\"inputmode\",\"line\",\"lineargradient\",\"marker\",\"mask\",\"metadata\",\"mpath\",\"part\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialgradient\",\"rect\",\"stop\",\"style\",\"switch\",\"symbol\",\"text\",\"textpath\",\"title\",\"tref\",\"tspan\",\"view\",\"vkern\"]),ne=ot([\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feDropShadow\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotLight\",\"feTile\",\"feTurbulence\"]),hr=ot([\"animate\",\"color-profile\",\"cursor\",\"discard\",\"font-face\",\"font-face-format\",\"font-face-name\",\"font-face-src\",\"font-face-uri\",\"foreignobject\",\"hatch\",\"hatchpath\",\"mesh\",\"meshgradient\",\"meshpatch\",\"meshrow\",\"missing-glyph\",\"script\",\"set\",\"solidcolor\",\"unknown\",\"use\"]),oe=ot([\"math\",\"menclose\",\"merror\",\"mfenced\",\"mfrac\",\"mglyph\",\"mi\",\"mlabeledtr\",\"mmultiscripts\",\"mn\",\"mo\",\"mover\",\"mpadded\",\"mphantom\",\"mroot\",\"mrow\",\"ms\",\"mspace\",\"msqrt\",\"mstyle\",\"msub\",\"msup\",\"msubsup\",\"mtable\",\"mtd\",\"mtext\",\"mtr\",\"munder\",\"munderover\",\"mprescripts\"]),pr=ot([\"maction\",\"maligngroup\",\"malignmark\",\"mlongdiv\",\"mscarries\",\"mscarry\",\"msgroup\",\"mstack\",\"msline\",\"msrow\",\"semantics\",\"annotation\",\"annotation-xml\",\"mprescripts\",\"none\"]),Oe=ot([\"#text\"]),De=ot([\"accept\",\"action\",\"align\",\"alt\",\"autocapitalize\",\"autocomplete\",\"autopictureinpicture\",\"autoplay\",\"background\",\"bgcolor\",\"border\",\"capture\",\"cellpadding\",\"cellspacing\",\"checked\",\"cite\",\"class\",\"clear\",\"color\",\"cols\",\"colspan\",\"controls\",\"controlslist\",\"coords\",\"crossorigin\",\"datetime\",\"decoding\",\"default\",\"dir\",\"disabled\",\"disablepictureinpicture\",\"disableremoteplayback\",\"download\",\"draggable\",\"enctype\",\"enterkeyhint\",\"exportparts\",\"face\",\"for\",\"headers\",\"height\",\"hidden\",\"high\",\"href\",\"hreflang\",\"id\",\"inert\",\"inputmode\",\"integrity\",\"ismap\",\"kind\",\"label\",\"lang\",\"list\",\"loading\",\"loop\",\"low\",\"max\",\"maxlength\",\"media\",\"method\",\"min\",\"minlength\",\"multiple\",\"muted\",\"name\",\"nonce\",\"noshade\",\"novalidate\",\"nowrap\",\"open\",\"optimum\",\"part\",\"pattern\",\"placeholder\",\"playsinline\",\"popover\",\"popovertarget\",\"popovertargetaction\",\"poster\",\"preload\",\"pubdate\",\"radiogroup\",\"readonly\",\"rel\",\"required\",\"rev\",\"reversed\",\"role\",\"rows\",\"rowspan\",\"spellcheck\",\"scope\",\"selected\",\"shape\",\"size\",\"sizes\",\"slot\",\"span\",\"srclang\",\"start\",\"src\",\"srcset\",\"step\",\"style\",\"summary\",\"tabindex\",\"title\",\"translate\",\"type\",\"usemap\",\"valign\",\"value\",\"width\",\"wrap\",\"xmlns\",\"slot\"]),ie=ot([\"accent-height\",\"accumulate\",\"additive\",\"alignment-baseline\",\"amplitude\",\"ascent\",\"attributename\",\"attributetype\",\"azimuth\",\"basefrequency\",\"baseline-shift\",\"begin\",\"bias\",\"by\",\"class\",\"clip\",\"clippathunits\",\"clip-path\",\"clip-rule\",\"color\",\"color-interpolation\",\"color-interpolation-filters\",\"color-profile\",\"color-rendering\",\"cx\",\"cy\",\"d\",\"dx\",\"dy\",\"diffuseconstant\",\"direction\",\"display\",\"divisor\",\"dur\",\"edgemode\",\"elevation\",\"end\",\"exponent\",\"fill\",\"fill-opacity\",\"fill-rule\",\"filter\",\"filterunits\",\"flood-color\",\"flood-opacity\",\"font-family\",\"font-size\",\"font-size-adjust\",\"font-stretch\",\"font-style\",\"font-variant\",\"font-weight\",\"fx\",\"fy\",\"g1\",\"g2\",\"glyph-name\",\"glyphref\",\"gradientunits\",\"gradienttransform\",\"height\",\"href\",\"id\",\"image-rendering\",\"in\",\"in2\",\"intercept\",\"k\",\"k1\",\"k2\",\"k3\",\"k4\",\"kerning\",\"keypoints\",\"keysplines\",\"keytimes\",\"lang\",\"lengthadjust\",\"letter-spacing\",\"kernelmatrix\",\"kernelunitlength\",\"lighting-color\",\"local\",\"marker-end\",\"marker-mid\",\"marker-start\",\"markerheight\",\"markerunits\",\"markerwidth\",\"maskcontentunits\",\"maskunits\",\"max\",\"mask\",\"mask-type\",\"media\",\"method\",\"mode\",\"min\",\"name\",\"numoctaves\",\"offset\",\"operator\",\"opacity\",\"order\",\"orient\",\"orientation\",\"origin\",\"overflow\",\"paint-order\",\"path\",\"pathlength\",\"patterncontentunits\",\"patterntransform\",\"patternunits\",\"points\",\"preservealpha\",\"preserveaspectratio\",\"primitiveunits\",\"r\",\"rx\",\"ry\",\"radius\",\"refx\",\"refy\",\"repeatcount\",\"repeatdur\",\"restart\",\"result\",\"rotate\",\"scale\",\"seed\",\"shape-rendering\",\"slope\",\"specularconstant\",\"specularexponent\",\"spreadmethod\",\"startoffset\",\"stddeviation\",\"stitchtiles\",\"stop-color\",\"stop-opacity\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-linecap\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke\",\"stroke-width\",\"style\",\"surfacescale\",\"systemlanguage\",\"tabindex\",\"tablevalues\",\"targetx\",\"targety\",\"transform\",\"transform-origin\",\"text-anchor\",\"text-decoration\",\"text-rendering\",\"textlength\",\"type\",\"u1\",\"u2\",\"unicode\",\"values\",\"viewbox\",\"visibility\",\"version\",\"vert-adv-y\",\"vert-origin-x\",\"vert-origin-y\",\"width\",\"word-spacing\",\"wrap\",\"writing-mode\",\"xchannelselector\",\"ychannelselector\",\"x\",\"x1\",\"x2\",\"xmlns\",\"y\",\"y1\",\"y2\",\"z\",\"zoomandpan\"]),Re=ot([\"accent\",\"accentunder\",\"align\",\"bevelled\",\"close\",\"columnsalign\",\"columnlines\",\"columnspan\",\"denomalign\",\"depth\",\"dir\",\"display\",\"displaystyle\",\"encoding\",\"fence\",\"frame\",\"height\",\"href\",\"id\",\"largeop\",\"length\",\"linethickness\",\"lspace\",\"lquote\",\"mathbackground\",\"mathcolor\",\"mathsize\",\"mathvariant\",\"maxsize\",\"minsize\",\"movablelimits\",\"notation\",\"numalign\",\"open\",\"rowalign\",\"rowlines\",\"rowspacing\",\"rowspan\",\"rspace\",\"rquote\",\"scriptlevel\",\"scriptminsize\",\"scriptsizemultiplier\",\"selection\",\"separator\",\"separators\",\"stretchy\",\"subscriptshift\",\"supscriptshift\",\"symmetric\",\"voffset\",\"width\",\"xmlns\"]),Bt=ot([\"xlink:href\",\"xml:id\",\"xlink:title\",\"xml:space\",\"xmlns:xlink\"]),fr=st(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm),gr=st(/<%[\\w\\W]*|[\\w\\W]*%>/gm),vr=st(/\\$\\{[\\w\\W]*/gm),Er=st(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/),br=st(/^aria-[\\-\\w]+$/),Pe=st(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i),yr=st(/^(?:\\w+script|data):/i),Tr=st(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g),$e=st(/^html$/i),Cr=st(/^[a-z][.\\w]*(-[.\\w]+)+$/i),ke=Object.freeze({__proto__:null,ARIA_ATTR:br,ATTR_WHITESPACE:Tr,CUSTOM_ELEMENT:Cr,DATA_ATTR:Er,DOCTYPE_NAME:$e,ERB_EXPR:gr,IS_ALLOWED_URI:Pe,IS_SCRIPT_OR_DATA:yr,MUSTACHE_EXPR:fr,TMPLIT_EXPR:vr}),Dt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Ar=function(){return typeof window>\"u\"?null:window},Sr=function(k,G){if(typeof k!=\"object\"||typeof k.createPolicy!=\"function\")return null;let U=null,P=\"data-tt-policy-suffix\";G&&G.hasAttribute(P)&&(U=G.getAttribute(P));let g=\"dompurify\"+(U?\"#\"+U:\"\");try{return k.createPolicy(g,{createHTML(p){return p},createScriptURL(p){return p}})}catch{return console.warn(\"TrustedTypes policy \"+g+\" could not be created.\"),null}},Ie=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Fe(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ar(),k=H=>Fe(H);if(k.version=\"3.3.1\",k.removed=[],!$||!$.document||$.document.nodeType!==Dt.document||!$.Element)return k.isSupported=!1,k;let{document:G}=$,U=G,P=U.currentScript,{DocumentFragment:g,HTMLTemplateElement:p,Node:y,Element:E,NodeFilter:S,NamedNodeMap:t=$.NamedNodeMap||$.MozNamedAttrMap,HTMLFormElement:n,DOMParser:o,trustedTypes:e}=$,r=E.prototype,i=Ot(r,\"cloneNode\"),a=Ot(r,\"remove\"),l=Ot(r,\"nextSibling\"),m=Ot(r,\"childNodes\"),d=Ot(r,\"parentNode\");if(typeof p==\"function\"){let H=G.createElement(\"template\");H.content&&H.content.ownerDocument&&(G=H.content.ownerDocument)}let b,h=\"\",{implementation:T,createNodeIterator:u,createDocumentFragment:v,getElementsByTagName:f}=G,{importNode:C}=U,_=Ie();k.isSupported=typeof qe==\"function\"&&typeof d==\"function\"&&T&&T.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:x,ERB_EXPR:q,TMPLIT_EXPR:R,DATA_ATTR:B,ARIA_ATTR:s,IS_SCRIPT_OR_DATA:w,ATTR_WHITESPACE:A,CUSTOM_ELEMENT:N}=ke,{IS_ALLOWED_URI:I}=ke,M=null,O=V({},[...Me,...re,...ne,...oe,...Oe]),L=null,j=V({},[...De,...ie,...Re,...Bt]),W=Object.seal(ae(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,z=null,X=Object.seal(ae(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),J=!0,Z=!0,Et=!1,bt=!0,mt=!1,Rt=!0,gt=!1,jt=!1,Wt=!1,yt=!1,kt=!1,It=!1,ce=!0,ue=!1,Ue=\"user-content-\",Gt=!0,wt=!1,Tt={},ct=null,zt=V({},[\"annotation-xml\",\"audio\",\"colgroup\",\"desc\",\"foreignobject\",\"head\",\"iframe\",\"math\",\"mi\",\"mn\",\"mo\",\"ms\",\"mtext\",\"noembed\",\"noframes\",\"noscript\",\"plaintext\",\"script\",\"style\",\"svg\",\"template\",\"thead\",\"title\",\"video\",\"xmp\"]),de=null,me=V({},[\"audio\",\"video\",\"img\",\"source\",\"image\",\"track\"]),Yt=null,he=V({},[\"alt\",\"class\",\"for\",\"id\",\"label\",\"name\",\"pattern\",\"placeholder\",\"role\",\"summary\",\"title\",\"value\",\"style\",\"xmlns\"]),qt=\"http://www.w3.org/1998/Math/MathML\",Pt=\"http://www.w3.org/2000/svg\",ht=\"http://www.w3.org/1999/xhtml\",Ct=ht,Vt=!1,Xt=null,je=V({},[qt,Pt,ht],te),$t=V({},[\"mi\",\"mo\",\"mn\",\"ms\",\"mtext\"]),Ft=V({},[\"annotation-xml\"]),We=V({},[\"title\",\"style\",\"font\",\"a\",\"script\"]),xt=null,Ge=[\"application/xhtml+xml\",\"text/html\"],ze=\"text/html\",tt=null,At=null,Ye=G.createElement(\"form\"),pe=function(c){return c instanceof RegExp||c instanceof Function},Jt=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(At&&At===c)){if((!c||typeof c!=\"object\")&&(c={}),c=dt(c),xt=Ge.indexOf(c.PARSER_MEDIA_TYPE)===-1?ze:c.PARSER_MEDIA_TYPE,tt=xt===\"application/xhtml+xml\"?te:Ut,M=lt(c,\"ALLOWED_TAGS\")?V({},c.ALLOWED_TAGS,tt):O,L=lt(c,\"ALLOWED_ATTR\")?V({},c.ALLOWED_ATTR,tt):j,Xt=lt(c,\"ALLOWED_NAMESPACES\")?V({},c.ALLOWED_NAMESPACES,te):je,Yt=lt(c,\"ADD_URI_SAFE_ATTR\")?V(dt(he),c.ADD_URI_SAFE_ATTR,tt):he,de=lt(c,\"ADD_DATA_URI_TAGS\")?V(dt(me),c.ADD_DATA_URI_TAGS,tt):me,ct=lt(c,\"FORBID_CONTENTS\")?V({},c.FORBID_CONTENTS,tt):zt,Y=lt(c,\"FORBID_TAGS\")?V({},c.FORBID_TAGS,tt):dt({}),z=lt(c,\"FORBID_ATTR\")?V({},c.FORBID_ATTR,tt):dt({}),Tt=lt(c,\"USE_PROFILES\")?c.USE_PROFILES:!1,J=c.ALLOW_ARIA_ATTR!==!1,Z=c.ALLOW_DATA_ATTR!==!1,Et=c.ALLOW_UNKNOWN_PROTOCOLS||!1,bt=c.ALLOW_SELF_CLOSE_IN_ATTR!==!1,mt=c.SAFE_FOR_TEMPLATES||!1,Rt=c.SAFE_FOR_XML!==!1,gt=c.WHOLE_DOCUMENT||!1,yt=c.RETURN_DOM||!1,kt=c.RETURN_DOM_FRAGMENT||!1,It=c.RETURN_TRUSTED_TYPE||!1,Wt=c.FORCE_BODY||!1,ce=c.SANITIZE_DOM!==!1,ue=c.SANITIZE_NAMED_PROPS||!1,Gt=c.KEEP_CONTENT!==!1,wt=c.IN_PLACE||!1,I=c.ALLOWED_URI_REGEXP||Pe,Ct=c.NAMESPACE||ht,$t=c.MATHML_TEXT_INTEGRATION_POINTS||$t,Ft=c.HTML_INTEGRATION_POINTS||Ft,W=c.CUSTOM_ELEMENT_HANDLING||{},c.CUSTOM_ELEMENT_HANDLING&&pe(c.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=c.CUSTOM_ELEMENT_HANDLING.tagNameCheck),c.CUSTOM_ELEMENT_HANDLING&&pe(c.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=c.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),c.CUSTOM_ELEMENT_HANDLING&&typeof c.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==\"boolean\"&&(W.allowCustomizedBuiltInElements=c.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),mt&&(Z=!1),kt&&(yt=!0),Tt&&(M=V({},Oe),L=[],Tt.html===!0&&(V(M,Me),V(L,De)),Tt.svg===!0&&(V(M,re),V(L,ie),V(L,Bt)),Tt.svgFilters===!0&&(V(M,ne),V(L,ie),V(L,Bt)),Tt.mathMl===!0&&(V(M,oe),V(L,Re),V(L,Bt))),c.ADD_TAGS&&(typeof c.ADD_TAGS==\"function\"?X.tagCheck=c.ADD_TAGS:(M===O&&(M=dt(M)),V(M,c.ADD_TAGS,tt))),c.ADD_ATTR&&(typeof c.ADD_ATTR==\"function\"?X.attributeCheck=c.ADD_ATTR:(L===j&&(L=dt(L)),V(L,c.ADD_ATTR,tt))),c.ADD_URI_SAFE_ATTR&&V(Yt,c.ADD_URI_SAFE_ATTR,tt),c.FORBID_CONTENTS&&(ct===zt&&(ct=dt(ct)),V(ct,c.FORBID_CONTENTS,tt)),c.ADD_FORBID_CONTENTS&&(ct===zt&&(ct=dt(ct)),V(ct,c.ADD_FORBID_CONTENTS,tt)),Gt&&(M[\"#text\"]=!0),gt&&V(M,[\"html\",\"head\",\"body\"]),M.table&&(V(M,[\"tbody\"]),delete Y.tbody),c.TRUSTED_TYPES_POLICY){if(typeof c.TRUSTED_TYPES_POLICY.createHTML!=\"function\")throw Mt('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');if(typeof c.TRUSTED_TYPES_POLICY.createScriptURL!=\"function\")throw Mt('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');b=c.TRUSTED_TYPES_POLICY,h=b.createHTML(\"\")}else b===void 0&&(b=Sr(e,P)),b!==null&&typeof h==\"string\"&&(h=b.createHTML(\"\"));ot&&ot(c),At=c}},fe=V({},[...re,...ne,...hr]),ge=V({},[...oe,...pr]),Ve=function(c){let D=d(c);(!D||!D.tagName)&&(D={namespaceURI:Ct,tagName:\"template\"});let F=Ut(c.tagName),K=Ut(D.tagName);return Xt[c.namespaceURI]?c.namespaceURI===Pt?D.namespaceURI===ht?F===\"svg\":D.namespaceURI===qt?F===\"svg\"&&(K===\"annotation-xml\"||$t[K]):!!fe[F]:c.namespaceURI===qt?D.namespaceURI===ht?F===\"math\":D.namespaceURI===Pt?F===\"math\"&&Ft[K]:!!ge[F]:c.namespaceURI===ht?D.namespaceURI===Pt&&!Ft[K]||D.namespaceURI===qt&&!$t[K]?!1:!ge[F]&&(We[F]||!fe[F]):!!(xt===\"application/xhtml+xml\"&&Xt[c.namespaceURI]):!1},ut=function(c){Lt(k.removed,{element:c});try{d(c).removeChild(c)}catch{a(c)}},vt=function(c,D){try{Lt(k.removed,{attribute:D.getAttributeNode(c),from:D})}catch{Lt(k.removed,{attribute:null,from:D})}if(D.removeAttribute(c),c===\"is\")if(yt||kt)try{ut(D)}catch{}else try{D.setAttribute(c,\"\")}catch{}},ve=function(c){let D=null,F=null;if(Wt)c=\"<remove></remove>\"+c;else{let Q=ee(c,/^[\\r\\n\\t ]+/);F=Q&&Q[0]}xt===\"application/xhtml+xml\"&&Ct===ht&&(c='<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>'+c+\"</body></html>\");let K=b?b.createHTML(c):c;if(Ct===ht)try{D=new o().parseFromString(K,xt)}catch{}if(!D||!D.documentElement){D=T.createDocument(Ct,\"template\",null);try{D.documentElement.innerHTML=Vt?h:K}catch{}}let rt=D.body||D.documentElement;return c&&F&&rt.insertBefore(G.createTextNode(F),rt.childNodes[0]||null),Ct===ht?f.call(D,gt?\"html\":\"body\")[0]:gt?D.documentElement:rt},Ee=function(c){return u.call(c.ownerDocument||c,c,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},Kt=function(c){return c instanceof n&&(typeof c.nodeName!=\"string\"||typeof c.textContent!=\"string\"||typeof c.removeChild!=\"function\"||!(c.attributes instanceof t)||typeof c.removeAttribute!=\"function\"||typeof c.setAttribute!=\"function\"||typeof c.namespaceURI!=\"string\"||typeof c.insertBefore!=\"function\"||typeof c.hasChildNodes!=\"function\")},be=function(c){return typeof y==\"function\"&&c instanceof y};function pt(H,c,D){Ht(H,F=>{F.call(k,c,D,At)})}let ye=function(c){let D=null;if(pt(_.beforeSanitizeElements,c,null),Kt(c))return ut(c),!0;let F=tt(c.nodeName);if(pt(_.uponSanitizeElement,c,{tagName:F,allowedTags:M}),Rt&&c.hasChildNodes()&&!be(c.firstElementChild)&&nt(/<[/\\w!]/g,c.innerHTML)&&nt(/<[/\\w!]/g,c.textContent)||c.nodeType===Dt.progressingInstruction||Rt&&c.nodeType===Dt.comment&&nt(/<[/\\w]/g,c.data))return ut(c),!0;if(!(X.tagCheck instanceof Function&&X.tagCheck(F))&&(!M[F]||Y[F])){if(!Y[F]&&Ce(F)&&(W.tagNameCheck instanceof RegExp&&nt(W.tagNameCheck,F)||W.tagNameCheck instanceof Function&&W.tagNameCheck(F)))return!1;if(Gt&&!ct[F]){let K=d(c)||c.parentNode,rt=m(c)||c.childNodes;if(rt&&K){let Q=rt.length;for(let at=Q-1;at>=0;--at){let ft=i(rt[at],!0);ft.__removalCount=(c.__removalCount||0)+1,K.insertBefore(ft,l(c))}}}return ut(c),!0}return c instanceof E&&!Ve(c)||(F===\"noscript\"||F===\"noembed\"||F===\"noframes\")&&nt(/<\\/no(script|embed|frames)/i,c.innerHTML)?(ut(c),!0):(mt&&c.nodeType===Dt.text&&(D=c.textContent,Ht([x,q,R],K=>{D=Nt(D,K,\" \")}),c.textContent!==D&&(Lt(k.removed,{element:c.cloneNode()}),c.textContent=D)),pt(_.afterSanitizeElements,c,null),!1)},Te=function(c,D,F){if(ce&&(D===\"id\"||D===\"name\")&&(F in G||F in Ye))return!1;if(!(Z&&!z[D]&&nt(B,D))){if(!(J&&nt(s,D))){if(!(X.attributeCheck instanceof Function&&X.attributeCheck(D,c))){if(!L[D]||z[D]){if(!(Ce(c)&&(W.tagNameCheck instanceof RegExp&&nt(W.tagNameCheck,c)||W.tagNameCheck instanceof Function&&W.tagNameCheck(c))&&(W.attributeNameCheck instanceof RegExp&&nt(W.attributeNameCheck,D)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(D,c))||D===\"is\"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&nt(W.tagNameCheck,F)||W.tagNameCheck instanceof Function&&W.tagNameCheck(F))))return!1}else if(!Yt[D]){if(!nt(I,Nt(F,A,\"\"))){if(!((D===\"src\"||D===\"xlink:href\"||D===\"href\")&&c!==\"script\"&&cr(F,\"data:\")===0&&de[c])){if(!(Et&&!nt(w,Nt(F,A,\"\")))){if(F)return!1}}}}}}}return!0},Ce=function(c){return c!==\"annotation-xml\"&&ee(c,N)},Ae=function(c){pt(_.beforeSanitizeAttributes,c,null);let{attributes:D}=c;if(!D||Kt(c))return;let F={attrName:\"\",attrValue:\"\",keepAttr:!0,allowedAttributes:L,forceKeepAttr:void 0},K=D.length;for(;K--;){let rt=D[K],{name:Q,namespaceURI:at,value:ft}=rt,St=tt(Q),Zt=ft,et=Q===\"value\"?Zt:ur(Zt);if(F.attrName=St,F.attrValue=et,F.keepAttr=!0,F.forceKeepAttr=void 0,pt(_.uponSanitizeAttribute,c,F),et=F.attrValue,ue&&(St===\"id\"||St===\"name\")&&(vt(Q,c),et=Ue+et),Rt&&nt(/((--!?|])>)|<\\/(style|title|textarea)/i,et)){vt(Q,c);continue}if(St===\"attributename\"&&ee(et,\"href\")){vt(Q,c);continue}if(F.forceKeepAttr)continue;if(!F.keepAttr){vt(Q,c);continue}if(!bt&&nt(/\\/>/i,et)){vt(Q,c);continue}mt&&Ht([x,q,R],we=>{et=Nt(et,we,\" \")});let Se=tt(c.nodeName);if(!Te(Se,St,et)){vt(Q,c);continue}if(b&&typeof e==\"object\"&&typeof e.getAttributeType==\"function\"&&!at)switch(e.getAttributeType(Se,St)){case\"TrustedHTML\":{et=b.createHTML(et);break}case\"TrustedScriptURL\":{et=b.createScriptURL(et);break}}if(et!==Zt)try{at?c.setAttributeNS(at,Q,et):c.setAttribute(Q,et),Kt(c)?ut(c):Ne(k.removed)}catch{vt(Q,c)}}pt(_.afterSanitizeAttributes,c,null)},Xe=function H(c){let D=null,F=Ee(c);for(pt(_.beforeSanitizeShadowDOM,c,null);D=F.nextNode();)pt(_.uponSanitizeShadowNode,D,null),ye(D),Ae(D),D.content instanceof g&&H(D.content);pt(_.afterSanitizeShadowDOM,c,null)};return k.sanitize=function(H){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=null,F=null,K=null,rt=null;if(Vt=!H,Vt&&(H=\"<!-->\"),typeof H!=\"string\"&&!be(H))if(typeof H.toString==\"function\"){if(H=H.toString(),typeof H!=\"string\")throw Mt(\"dirty is not a string, aborting\")}else throw Mt(\"toString is not a function\");if(!k.isSupported)return H;if(jt||Jt(c),k.removed=[],typeof H==\"string\"&&(wt=!1),wt){if(H.nodeName){let ft=tt(H.nodeName);if(!M[ft]||Y[ft])throw Mt(\"root node is forbidden and cannot be sanitized in-place\")}}else if(H instanceof y)D=ve(\"<!---->\"),F=D.ownerDocument.importNode(H,!0),F.nodeType===Dt.element&&F.nodeName===\"BODY\"||F.nodeName===\"HTML\"?D=F:D.appendChild(F);else{if(!yt&&!mt&&!gt&&H.indexOf(\"<\")===-1)return b&&It?b.createHTML(H):H;if(D=ve(H),!D)return yt?null:It?h:\"\"}D&&Wt&&ut(D.firstChild);let Q=Ee(wt?H:D);for(;K=Q.nextNode();)ye(K),Ae(K),K.content instanceof g&&Xe(K.content);if(wt)return H;if(yt){if(kt)for(rt=v.call(D.ownerDocument);D.firstChild;)rt.appendChild(D.firstChild);else rt=D;return(L.shadowroot||L.shadowrootmode)&&(rt=C.call(U,rt,!0)),rt}let at=gt?D.outerHTML:D.innerHTML;return gt&&M[\"!doctype\"]&&D.ownerDocument&&D.ownerDocument.doctype&&D.ownerDocument.doctype.name&&nt($e,D.ownerDocument.doctype.name)&&(at=\"<!DOCTYPE \"+D.ownerDocument.doctype.name+`>\n`+at),mt&&Ht([x,q,R],ft=>{at=Nt(at,ft,\" \")}),b&&It?b.createHTML(at):at},k.setConfig=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jt(H),jt=!0},k.clearConfig=function(){At=null,jt=!1},k.isValidAttribute=function(H,c,D){At||Jt({});let F=tt(H),K=tt(c);return Te(F,K,D)},k.addHook=function(H,c){typeof c==\"function\"&&Lt(_[H],c)},k.removeHook=function(H,c){if(c!==void 0){let D=sr(_[H],c);return D===-1?void 0:lr(_[H],D,1)[0]}return Ne(_[H])},k.removeHooks=function(H){_[H]=[]},k.removeAllHooks=function(){_=Ie()},k}var He=Fe();(function(){try{let $=new Be.default(document,{url:window.location.href}).parse(),k=He.sanitize($.content,{ALLOWED_TAGS:[\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"p\",\"br\",\"hr\",\"ul\",\"ol\",\"li\",\"blockquote\",\"pre\",\"code\",\"a\",\"strong\",\"em\",\"b\",\"i\",\"u\",\"s\",\"del\",\"ins\",\"img\",\"figure\",\"figcaption\",\"table\",\"thead\",\"tbody\",\"tfoot\",\"tr\",\"th\",\"td\",\"div\",\"span\",\"section\",\"article\",\"sub\",\"sup\",\"mark\",\"small\",\"dl\",\"dt\",\"dd\",\"details\",\"summary\"],ALLOWED_ATTR:[\"href\",\"src\",\"alt\",\"title\",\"class\",\"width\",\"height\",\"colspan\",\"rowspan\"],ALLOW_DATA_ATTR:!1}),U=new DOMParser().parseFromString(k,\"text/html\"),P=[];U.querySelectorAll(\"img[src]\").forEach(g=>{if(P.length>=20)return;let p=g.getAttribute(\"src\");p&&p.startsWith(\"http\")&&P.push(p)}),window.ReactNativeWebView.postMessage(JSON.stringify({success:!0,title:$.title||document.title||\"Untitled\",author:$.author||$.site||\"\",sourceUrl:window.location.href,html:k,images:P}))}catch($){window.ReactNativeWebView.postMessage(JSON.stringify({success:!1,error:$.message||String($)}))}})();})();\n/*! Bundled license information:\n\ndompurify/dist/purify.es.mjs:\n  (*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE *)\n*/\n";
