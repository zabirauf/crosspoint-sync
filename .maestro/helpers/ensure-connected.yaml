appId: com.crosspointsync.app
name: "Ensure Connected State"
---
# Ensure the app is connected to a device.
# Forces a fresh app launch to trigger auto-reconnect via lastDeviceIp.

- stopApp
- launchApp

# Wait for the app to load
- extendedWaitUntil:
    visible:
      id: "Library.ConnectionPill"
    timeout: 10000

# Wait for auto-reconnect to complete — wait for actual file rows to populate
- extendedWaitUntil:
    visible:
      id: "Library.FileList"
    timeout: 15000

# Wait for files to load — "Articles" folder exists in the mock filesystem root
- extendedWaitUntil:
    visible:
      id: "Library.FileRow.Articles"
    timeout: 10000
